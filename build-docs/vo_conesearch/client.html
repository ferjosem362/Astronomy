<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Using “Client” API &#8212; astroquery v0.4.7.dev9024</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-astropy.css?v=9d21690f" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=eafc0fe6" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    
    <script src="../_static/jquery.js?v=5d32c60e"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
    <script src="../_static/documentation_options.js?v=4195d067"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script type="text/javascript" src="../_static/sidebar.js"></script>
    <script type="text/javascript" src="../_static/copybutton.js"></script>
    <link rel="icon" href="../_static/astropy_logo.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Using “Server” API" href="validator.html" />
    <link rel="prev" title="VO Simple Cone Search (astroquery.vo_conesearch)" href="vo_conesearch.html" />
    <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,600' rel='stylesheet' type='text/css'/>

  </head><body>
<div class="topbar">
  <a class="brand" title="Documentation Home" href="../index.html"><span id="logotext1">astro</span><span id="logotext2">query</span><span id="logotext3">:docs</span></a>
  <ul>
    
    <li><a class="homelink" title="Astropy Homepage" href="http://www.astropy.org"></a></li>
    <li><a title="General Index" href="../genindex.html">Index</a></li>
    <li><a title="Module Index" href="../py-modindex.html">Modules</a></li>
    <li>
      
      
<form action="../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
      
    </li>
  </ul>
</div>

<div class="related">
    <h3>Navigation</h3>
    <ul>
      <li class="right">
	<a href="validator.html" title="Using “Server” API">
	  next &raquo;
	</a>
      </li>
      <li class="right">
	<a href="vo_conesearch.html" title="VO Simple Cone Search (astroquery.vo_conesearch)">
	  &laquo; previous
	</a>
	 |
      </li>
      <li>
	<a href="../index.html">astroquery v0.4.7.dev9024</a>
	 &#187;
      </li>
      <li><a href="vo_conesearch.html" accesskey="U">VO Simple Cone Search (<code class="docutils literal notranslate"><span class="pre">astroquery.vo_conesearch</span></code>)</a> &#187;</li>
      
      <li>Using “Client” API</li> 
    </ul>
</div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="using-client-api">
<h1>Using “Client” API<a class="headerlink" href="#using-client-api" title="Link to this heading">¶</a></h1>
<p>The “client” API contains modules supporting VO Cone Search’s client-side
operations.</p>
<section id="catalog-manipulation">
<span id="vo-sec-client-cat-manip"></span><h2>Catalog Manipulation<a class="headerlink" href="#catalog-manipulation" title="Link to this heading">¶</a></h2>
<p>You can manipulate a VO catalog using
<a class="reference internal" href="../api/astroquery.vo_conesearch.vos_catalog.VOSCatalog.html#astroquery.vo_conesearch.vos_catalog.VOSCatalog" title="astroquery.vo_conesearch.vos_catalog.VOSCatalog"><code class="xref py py-obj docutils literal notranslate"><span class="pre">VOSCatalog</span></code></a>,
which is basically a dictionary with added functionalities.</p>
<section id="examples">
<span id="vo-sec-client-cat-manip-examples"></span><h3>Examples<a class="headerlink" href="#examples" title="Link to this heading">¶</a></h3>
<p>You can create a VO catalog from scratch with your own VO service by
providing its title and access URL, and optionally any other metadata
as key-value pairs:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astroquery.vo_conesearch.vos_catalog</span> <span class="kn">import</span> <span class="n">VOSCatalog</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">my_cat</span> <span class="o">=</span> <span class="n">VOSCatalog</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
<span class="gp">... </span>    <span class="s1">&#39;My Own&#39;</span><span class="p">,</span> <span class="s1">&#39;http://ex.org/cgi-bin/cs.pl?&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">description</span><span class="o">=</span><span class="s1">&#39;My first VO service.&#39;</span><span class="p">,</span> <span class="n">creator</span><span class="o">=</span><span class="s1">&#39;J. Doe&#39;</span><span class="p">,</span> <span class="n">year</span><span class="o">=</span><span class="mi">2013</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">my_cat</span><span class="p">)</span>
<span class="go">title: My Own</span>
<span class="go">url: http://ex.org/cgi-bin/cs.pl?</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">my_cat</span><span class="o">.</span><span class="n">dumps</span><span class="p">())</span>
<span class="go">{</span>
<span class="go">    &quot;creator&quot;: &quot;J. Doe&quot;,</span>
<span class="go">    &quot;description&quot;: &quot;My first VO service.&quot;,</span>
<span class="go">    &quot;title&quot;: &quot;My Own&quot;,</span>
<span class="go">    &quot;url&quot;: &quot;http://ex.org/cgi-bin/cs.pl?&quot;,</span>
<span class="go">    &quot;year&quot;: 2013</span>
<span class="go">}</span>
</pre></div>
</div>
<p>You can modify and add fields:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">my_cat</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2014</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">my_cat</span><span class="p">[</span><span class="s1">&#39;new_field&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Hello world&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">my_cat</span><span class="o">.</span><span class="n">dumps</span><span class="p">())</span>
<span class="go">{</span>
<span class="go">    &quot;creator&quot;: &quot;J. Doe&quot;,</span>
<span class="go">    &quot;description&quot;: &quot;My first VO service.&quot;,</span>
<span class="go">    &quot;new_field&quot;: &quot;Hello world&quot;,</span>
<span class="go">    &quot;title&quot;: &quot;My Own&quot;,</span>
<span class="go">    &quot;url&quot;: &quot;http://ex.org/cgi-bin/cs.pl?&quot;,</span>
<span class="go">    &quot;year&quot;: 2014</span>
<span class="go">}</span>
</pre></div>
</div>
<p>In addition, you can also delete an existing field, except the compulsory
title and access URL:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">my_cat</span><span class="o">.</span><span class="n">delete_attribute</span><span class="p">(</span><span class="s1">&#39;description&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">my_cat</span><span class="o">.</span><span class="n">dumps</span><span class="p">())</span>
<span class="go">{</span>
<span class="go">    &quot;creator&quot;: &quot;J. Doe&quot;,</span>
<span class="go">    &quot;new_field&quot;: &quot;Hello world&quot;,</span>
<span class="go">    &quot;title&quot;: &quot;My Own&quot;,</span>
<span class="go">    &quot;url&quot;: &quot;http://ex.org/cgi-bin/cs.pl?&quot;,</span>
<span class="go">    &quot;year&quot;: 2014</span>
<span class="go">}</span>
</pre></div>
</div>
</section>
</section>
<section id="database-manipulation">
<span id="vo-sec-client-db-manip"></span><h2>Database Manipulation<a class="headerlink" href="#database-manipulation" title="Link to this heading">¶</a></h2>
<p>You can manipulate VO database using
<a class="reference internal" href="../api/astroquery.vo_conesearch.vos_catalog.VOSDatabase.html#astroquery.vo_conesearch.vos_catalog.VOSDatabase" title="astroquery.vo_conesearch.vos_catalog.VOSDatabase"><code class="xref py py-obj docutils literal notranslate"><span class="pre">VOSDatabase</span></code></a>,
which is basically a nested dictionary with added functionalities.</p>
<section id="vo-sec-client-db-manip-examples">
<span id="id1"></span><h3>Examples<a class="headerlink" href="#vo-sec-client-db-manip-examples" title="Link to this heading">¶</a></h3>
<p>You can choose to start with an empty database:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astroquery.vo_conesearch.vos_catalog</span> <span class="kn">import</span> <span class="n">VOSDatabase</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">my_db</span> <span class="o">=</span> <span class="n">VOSDatabase</span><span class="o">.</span><span class="n">create_empty</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">my_db</span><span class="o">.</span><span class="n">dumps</span><span class="p">())</span>
<span class="go">{</span>
<span class="go">    &quot;__version__&quot;: 1,</span>
<span class="go">    &quot;catalogs&quot;: {}</span>
<span class="go">}</span>
</pre></div>
</div>
<p>Add the custom catalog from
<a class="reference internal" href="#vo-sec-client-cat-manip-examples"><span class="std std-ref">VO catalog examples</span></a> to database:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">my_db</span><span class="o">.</span><span class="n">add_catalog</span><span class="p">(</span><span class="s1">&#39;My Catalog 1&#39;</span><span class="p">,</span> <span class="n">my_cat</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">my_db</span><span class="p">)</span>
<span class="go">My Catalog 1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">my_db</span><span class="o">.</span><span class="n">dumps</span><span class="p">())</span>
<span class="go">{</span>
<span class="go">    &quot;__version__&quot;: 1,</span>
<span class="go">    &quot;catalogs&quot;: {</span>
<span class="go">        &quot;My Catalog 1&quot;: {</span>
<span class="go">            &quot;creator&quot;: &quot;J. Doe&quot;,</span>
<span class="go">            &quot;new_field&quot;: &quot;Hello world&quot;,</span>
<span class="go">            &quot;title&quot;: &quot;My Own&quot;,</span>
<span class="go">            &quot;url&quot;: &quot;http://ex.org/cgi-bin/cs.pl?&quot;,</span>
<span class="go">            &quot;year&quot;: 2014</span>
<span class="go">        }</span>
<span class="go">    }</span>
<span class="go">}</span>
</pre></div>
</div>
<p>You can write/read the new database to/from a JSON file:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">my_db</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="s1">&#39;my_vo_database.json&#39;</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">my_db</span> <span class="o">=</span> <span class="n">VOSDatabase</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s1">&#39;my_vo_database.json&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>You can also load a database from a VO registry. The process is described in
<a class="reference internal" href="validator.html#vo-sec-validator-build-db"><span class="std std-ref">Building the Database from Registry</span></a>, except that here, validation is not done,
so <code class="docutils literal notranslate"><span class="pre">validate_xxx</span></code> keys are not added. This might generate a lot of warnings,
especially if the registry has duplicate entries of similar services, so
here, we silently ignore all the warnings:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">warnings</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astroquery.vo_conesearch.validator</span> <span class="kn">import</span> <span class="n">conf</span> <span class="k">as</span> <span class="n">validator_conf</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">warnings</span><span class="o">.</span><span class="n">catch_warnings</span><span class="p">():</span>  
<span class="gp">... </span>    <span class="n">warnings</span><span class="o">.</span><span class="n">simplefilter</span><span class="p">(</span><span class="s1">&#39;ignore&#39;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">registry_db</span> <span class="o">=</span> <span class="n">VOSDatabase</span><span class="o">.</span><span class="n">from_registry</span><span class="p">(</span>
<span class="gp">... </span>        <span class="n">validator_conf</span><span class="o">.</span><span class="n">conesearch_master_list</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;binary&#39;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">cache</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="go">Downloading http://vao.stsci.edu/regtap/tapservice.aspx/...</span>
<span class="go">|==========================================|  44M/ 44M (100.00%)         0s</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">registry_db</span><span class="p">)</span>  
<span class="go">21326</span>
</pre></div>
</div>
<p>Find catalog names containing <code class="docutils literal notranslate"><span class="pre">'usno*a2'</span></code> in the registry database:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">usno_a2_list</span> <span class="o">=</span> <span class="n">registry_db</span><span class="o">.</span><span class="n">list_catalogs</span><span class="p">(</span><span class="n">pattern</span><span class="o">=</span><span class="s1">&#39;usno*a2&#39;</span><span class="p">)</span>  
<span class="gp">&gt;&gt;&gt; </span><span class="n">usno_a2_list</span>  
<span class="go">[&#39;ROSAT All-Sky Survey Bright Source Catalog USNO A2 Cross-Associations 1&#39;,</span>
<span class="go"> &#39;The USNO-A2.0 Catalogue (Monet+ 1998) 1&#39;,</span>
<span class="go"> &#39;USNO-A2 Catalogue 1&#39;]</span>
</pre></div>
</div>
<p>Find access URLs containing <code class="docutils literal notranslate"><span class="pre">'stsci'</span></code> in the registry database:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">stsci_urls</span> <span class="o">=</span> <span class="n">registry_db</span><span class="o">.</span><span class="n">list_catalogs_by_url</span><span class="p">(</span><span class="n">pattern</span><span class="o">=</span><span class="s1">&#39;stsci&#39;</span><span class="p">)</span>  
<span class="gp">&gt;&gt;&gt; </span><span class="n">stsci_urls</span>  
<span class="go">[&#39;http://archive.stsci.edu/befs/search.php?&#39;,</span>
<span class="go"> &#39;http://archive.stsci.edu/euve/search.php?&#39;, ...,</span>
<span class="go"> &#39;http://gsss.stsci.edu/webservices/vo/ConeSearch.aspx?CAT=ultravista&amp;&#39;,</span>
<span class="go"> &#39;http://gsss.stsci.edu/webservices/vo/ConeSearch.aspx?CAT=viking&amp;&#39;]</span>
</pre></div>
</div>
<p>Extract a catalog titled <code class="docutils literal notranslate"><span class="pre">'USNO-A2</span> <span class="pre">Catalogue</span> <span class="pre">1'</span></code> from the registry:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">usno_a2</span> <span class="o">=</span> <span class="n">registry_db</span><span class="o">.</span><span class="n">get_catalog</span><span class="p">(</span><span class="s1">&#39;USNO-A2 Catalogue 1&#39;</span><span class="p">)</span>  
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">usno_a2</span><span class="p">)</span>  
<span class="go">title: &#39;USNO-A2 Catalogue&#39;</span>
<span class="go">url: http://www.nofs.navy.mil/cgi-bin/vo_cone.cgi?CAT=USNO-A2&amp;</span>
</pre></div>
</div>
<p>Extract a catalog by known access URL from the registry (the iterator version
of this functionality is
<a class="reference internal" href="../api/astroquery.vo_conesearch.vos_catalog.VOSDatabase.html#astroquery.vo_conesearch.vos_catalog.VOSDatabase.get_catalogs_by_url" title="astroquery.vo_conesearch.vos_catalog.VOSDatabase.get_catalogs_by_url"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_catalogs_by_url()</span></code></a>,
which is useful in the case of multiple entries with same access URL):</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">gsc_url</span> <span class="o">=</span> <span class="s1">&#39;https://vizier.cds.unistra.fr/viz-bin/conesearch/I/305/out?&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gsc</span> <span class="o">=</span> <span class="n">registry_db</span><span class="o">.</span><span class="n">get_catalog_by_url</span><span class="p">(</span><span class="n">gsc_url</span><span class="p">)</span>  
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">gsc</span><span class="p">)</span>  
<span class="go">title: &#39;The Guide Star Catalog, Version 2.3.2 (GSC2.3) (STScI, 2006)&#39;</span>
<span class="go">url: https://vizier.cds.unistra.fr/viz-bin/conesearch/I/305/out?</span>
</pre></div>
</div>
<p>Add all <code class="docutils literal notranslate"><span class="pre">'usno*a2'</span></code> catalogs from registry to your database:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">cat</span> <span class="ow">in</span> <span class="n">registry_db</span><span class="o">.</span><span class="n">get_catalogs</span><span class="p">():</span>  
<span class="gp">... </span>    <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">usno_a2_list</span><span class="p">:</span>
<span class="gp">... </span>        <span class="n">my_db</span><span class="o">.</span><span class="n">add_catalog</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">cat</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">my_db</span><span class="o">.</span><span class="n">list_catalogs</span><span class="p">()</span>  
<span class="go">[&#39;My Catalog 1&#39;,</span>
<span class="go"> &#39;ROSAT All-Sky Survey Bright Source Catalog USNO A2 Cross-Associations 1&#39;,</span>
<span class="go"> &#39;The USNO-A2.0 Catalogue (Monet+ 1998) 1&#39;,</span>
<span class="go"> &#39;USNO-A2 Catalogue 1&#39;]</span>
</pre></div>
</div>
<p>You can delete a catalog from the database either by name or access URL:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">my_db</span><span class="o">.</span><span class="n">delete_catalog</span><span class="p">(</span><span class="s1">&#39;USNO-A2 Catalogue 1&#39;</span><span class="p">)</span>  
<span class="gp">&gt;&gt;&gt; </span><span class="n">my_db</span><span class="o">.</span><span class="n">delete_catalog</span><span class="p">(</span><span class="s1">&#39;The USNO-A2.0 Catalogue (Monet+ 1998) 1&#39;</span><span class="p">)</span>  
<span class="gp">&gt;&gt;&gt; </span><span class="n">my_db</span><span class="o">.</span><span class="n">delete_catalog_by_url</span><span class="p">(</span>
<span class="gp">... </span>    <span class="s1">&#39;https://heasarc.gsfc.nasa.gov/cgi-bin/vo/cone/coneGet.pl?table=rassusnoid&amp;&#39;</span><span class="p">)</span>  
<span class="gp">&gt;&gt;&gt; </span><span class="n">my_db</span><span class="o">.</span><span class="n">list_catalogs</span><span class="p">()</span>  
<span class="go">[&#39;My Catalog 1&#39;, &#39;The USNO-A2.0 Catalogue (Monet+ 1998) 1&#39;]</span>
</pre></div>
</div>
<p>You can also merge two database together. In this example, the second database
contains a simple catalog that only has given name and access URL:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">other_db</span> <span class="o">=</span> <span class="n">VOSDatabase</span><span class="o">.</span><span class="n">create_empty</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">other_db</span><span class="o">.</span><span class="n">add_catalog_by_url</span><span class="p">(</span>
<span class="gp">... </span>    <span class="s1">&#39;My Guide Star Catalogue&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="s1">&#39;https://vizier.cds.unistra.fr/viz-bin/conesearch/I/305/out?&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">other_db</span><span class="o">.</span><span class="n">dumps</span><span class="p">())</span>
<span class="go">{</span>
<span class="go">    &quot;__version__&quot;: 1,</span>
<span class="go">    &quot;catalogs&quot;: {</span>
<span class="go">        &quot;My Guide Star Catalogue&quot;: {</span>
<span class="go">            &quot;title&quot;: &quot;My Guide Star Catalogue&quot;,</span>
<span class="go">            &quot;url&quot;: &quot;https://vizier.cds.unistra.fr/viz-bin/conesearch/I/305/out?&quot;</span>
<span class="go">        }</span>
<span class="go">    }</span>
<span class="go">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">merged_db</span> <span class="o">=</span> <span class="n">my_db</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">other_db</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">merged_db</span><span class="o">.</span><span class="n">list_catalogs</span><span class="p">()</span>
<span class="go">[&#39;My Catalog 1&#39;, &#39;My Guide Star Catalogue&#39;]</span>
</pre></div>
</div>
</section>
</section>
<section id="general-vo-services-access">
<span id="vo-sec-client-vos"></span><h2>General VO Services Access<a class="headerlink" href="#general-vo-services-access" title="Link to this heading">¶</a></h2>
<p><a class="reference internal" href="vo_conesearch.html#module-astroquery.vo_conesearch.vos_catalog" title="astroquery.vo_conesearch.vos_catalog"><code class="xref py py-obj docutils literal notranslate"><span class="pre">astroquery.vo_conesearch.vos_catalog</span></code></a> also contains common utilities for
accessing simple VO services already validated by STScI
(see <a class="reference internal" href="validator.html#vo-sec-validator-validate"><span class="std std-ref">Validation for Simple Cone Search</span></a>).</p>
<section id="configurable-items">
<span id="vo-sec-vos-config"></span><h3>Configurable Items<a class="headerlink" href="#configurable-items" title="Link to this heading">¶</a></h3>
<p>These parameters are set via <a class="reference external" href="https://docs.astropy.org/en/latest/config/index.html#astropy-config" title="(in Astropy v6.1)"><span>Configuration System (astropy.config)</span></a>:</p>
<ul class="simple">
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">astroquery.vo_conesearch.conf.pedantic</span></code></dt><dd><p>Set strictness of VO table parser (<code class="docutils literal notranslate"><span class="pre">False</span></code> is recommended).</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">astroquery.vo_conesearch.conf.timeout</span></code></dt><dd><p>Timeout for remote service access.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">astroquery.vo_conesearch.conf.vos_baseurl</span></code></dt><dd><p>URL (or path) where VO Service database is stored.</p>
</dd>
</dl>
</li>
</ul>
</section>
<section id="id2">
<h3>Examples<a class="headerlink" href="#id2" title="Link to this heading">¶</a></h3>
<p>Get all catalogs from a database named <code class="docutils literal notranslate"><span class="pre">'conesearch_good'</span></code> (this contains
cone search services that cleanly passed daily validations;
also see <a class="reference internal" href="#vo-sec-scs-examples"><span class="std std-ref">Cone Search Examples</span></a>):</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astroquery.vo_conesearch</span> <span class="kn">import</span> <span class="n">vos_catalog</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">my_db</span> <span class="o">=</span> <span class="n">vos_catalog</span><span class="o">.</span><span class="n">get_remote_catalog_db</span><span class="p">(</span><span class="s1">&#39;conesearch_good&#39;</span><span class="p">)</span>  
<span class="go">Downloading https://astroconda.org/aux/vo_databases/conesearch_good.json</span>
<span class="go">|==========================================|  59k/ 59k (100.00%)         0s</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">my_db</span><span class="p">)</span>  
<span class="go">Guide Star Catalog 2.3 Cone Search 1</span>
<span class="go">SDSS DR7 - Sloan Digital Sky Survey Data Release 7 1</span>
<span class="go"># ...</span>
<span class="go">Two Micron All Sky Survey (2MASS) 2</span>
</pre></div>
</div>
<p>If you get timeout error, you need to use a custom timeout as follows:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astropy.utils</span> <span class="kn">import</span> <span class="n">data</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">data</span><span class="o">.</span><span class="n">conf</span><span class="o">.</span><span class="n">set_temp</span><span class="p">(</span><span class="s1">&#39;remote_timeout&#39;</span><span class="p">,</span> <span class="mi">30</span><span class="p">):</span>  
<span class="gp">... </span>    <span class="n">my_db</span> <span class="o">=</span> <span class="n">vos_catalog</span><span class="o">.</span><span class="n">get_remote_catalog_db</span><span class="p">(</span><span class="s1">&#39;conesearch_good&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>To see validation warnings generated by <a class="reference internal" href="validator.html#vo-sec-validator-validate"><span class="std std-ref">Validation for Simple Cone Search</span></a>
for the one of the catalogs above:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">my_cat</span> <span class="o">=</span> <span class="n">my_db</span><span class="o">.</span><span class="n">get_catalog</span><span class="p">(</span><span class="s1">&#39;Guide Star Catalog 2.3 Cone Search 1&#39;</span><span class="p">)</span>  
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">my_cat</span><span class="p">[</span><span class="s1">&#39;validate_warnings&#39;</span><span class="p">]:</span>  
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>
<span class="go">/.../vo.xml:136:0: W50: Invalid unit string &#39;pixel&#39;</span>
</pre></div>
</div>
<p>By default, pedantic is <code class="docutils literal notranslate"><span class="pre">False</span></code>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astroquery.vo_conesearch</span> <span class="kn">import</span> <span class="n">conf</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conf</span><span class="o">.</span><span class="n">pedantic</span>
<span class="go">False</span>
</pre></div>
</div>
<p>To call a given VO service; In this case, a Cone Search
(also see <a class="reference internal" href="#vo-sec-scs-examples"><span class="std std-ref">Cone Search Examples</span></a>):</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astropy</span> <span class="kn">import</span> <span class="n">coordinates</span> <span class="k">as</span> <span class="n">coord</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astropy</span> <span class="kn">import</span> <span class="n">units</span> <span class="k">as</span> <span class="n">u</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">coord</span><span class="o">.</span><span class="n">SkyCoord</span><span class="o">.</span><span class="n">from_name</span><span class="p">(</span><span class="s1">&#39;47 Tuc&#39;</span><span class="p">)</span>  
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span>  
<span class="go">&lt;SkyCoord (ICRS): (ra, dec) in deg</span>
<span class="go">    (6.0223292, -72.0814444)&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sr</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">degree</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sr</span>
<span class="go">&lt;Quantity 0.5 deg&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">vos_catalog</span><span class="o">.</span><span class="n">call_vo_service</span><span class="p">(</span>
<span class="gp">... </span>    <span class="s1">&#39;conesearch_good&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;RA&#39;</span><span class="p">:</span> <span class="n">c</span><span class="o">.</span><span class="n">ra</span><span class="o">.</span><span class="n">degree</span><span class="p">,</span> <span class="s1">&#39;DEC&#39;</span><span class="p">:</span> <span class="n">c</span><span class="o">.</span><span class="n">dec</span><span class="o">.</span><span class="n">degree</span><span class="p">,</span> <span class="s1">&#39;SR&#39;</span><span class="p">:</span> <span class="n">sr</span><span class="o">.</span><span class="n">value</span><span class="p">},</span>
<span class="gp">... </span>    <span class="n">catalog_db</span><span class="o">=</span><span class="s1">&#39;Guide Star Catalog 2.3 Cone Search 1&#39;</span><span class="p">)</span>  
<span class="go">Trying http://gsss.stsci.edu/webservices/vo/ConeSearch.aspx?CAT=GSC23&amp;...</span>
<span class="go">Downloading ...</span>
<span class="go">WARNING: W50: ...: Invalid unit string &#39;pixel&#39; [astropy.io.votable.tree]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span>  
<span class="go">&lt;Table masked=True length=36184&gt;</span>
<span class="go">   _r      USNO-A1.0    RA_ICRS_   DE_ICRS_  ...   Bmag    Rmag   Epoch</span>
<span class="go">  deg                     deg        deg     ...   mag     mag      yr</span>
<span class="go">float64     bytes13     float64    float64   ... float64 float64 float64</span>
<span class="go">-------- ------------- ---------- ---------- ... ------- ------- --------</span>
<span class="go">0.499298 0150-00088188   4.403473 -72.124045 ...    20.6    19.4 1977.781</span>
<span class="go">0.499075 0150-00088198   4.403906 -72.122762 ...    21.2    18.0 1977.778</span>
<span class="go">0.499528 0150-00088210   4.404531 -72.045198 ...    16.2    15.4 1977.781</span>
<span class="go">     ...           ...        ...        ... ...     ...     ...      ...</span>
<span class="go">0.499917 0150-00226223   7.647400 -72.087600 ...    23.4    21.7 1975.829</span>
</pre></div>
</div>
<p>Unlike <a class="reference internal" href="../api/astroquery.vo_conesearch.conesearch.conesearch.html#astroquery.vo_conesearch.conesearch.conesearch" title="astroquery.vo_conesearch.conesearch.conesearch"><code class="xref py py-func docutils literal notranslate"><span class="pre">conesearch()</span></code></a>,
<a class="reference internal" href="../api/astroquery.vo_conesearch.vos_catalog.call_vo_service.html#astroquery.vo_conesearch.vos_catalog.call_vo_service" title="astroquery.vo_conesearch.vos_catalog.call_vo_service"><code class="xref py py-func docutils literal notranslate"><span class="pre">call_vo_service()</span></code></a> is a low-level
function and returns <a class="reference external" href="https://docs.astropy.org/en/latest/api/astropy.io.votable.tree.TableElement.html#astropy.io.votable.tree.TableElement" title="(in Astropy v6.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">astropy.io.votable.tree.TableElement</span></code></a>. To convert it to
<a class="reference external" href="https://docs.astropy.org/en/latest/api/astropy.table.Table.html#astropy.table.Table" title="(in Astropy v6.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">astropy.table.Table</span></code></a>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tab</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">to_table</span><span class="p">()</span>  
</pre></div>
</div>
<p>To repeat the above and suppress <em>all</em> the screen outputs (not recommended):</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">warnings</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">warnings</span><span class="o">.</span><span class="n">catch_warnings</span><span class="p">():</span>  
<span class="gp">... </span>    <span class="n">warnings</span><span class="o">.</span><span class="n">simplefilter</span><span class="p">(</span><span class="s1">&#39;ignore&#39;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">result</span> <span class="o">=</span> <span class="n">vos_catalog</span><span class="o">.</span><span class="n">call_vo_service</span><span class="p">(</span>
<span class="gp">... </span>        <span class="s1">&#39;conesearch_good&#39;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;RA&#39;</span><span class="p">:</span> <span class="n">c</span><span class="o">.</span><span class="n">ra</span><span class="o">.</span><span class="n">degree</span><span class="p">,</span> <span class="s1">&#39;DEC&#39;</span><span class="p">:</span> <span class="n">c</span><span class="o">.</span><span class="n">dec</span><span class="o">.</span><span class="n">degree</span><span class="p">,</span> <span class="s1">&#39;SR&#39;</span><span class="p">:</span> <span class="n">sr</span><span class="o">.</span><span class="n">value</span><span class="p">},</span>
<span class="gp">... </span>        <span class="n">catalog_db</span><span class="o">=</span><span class="s1">&#39;Guide Star Catalog 2.3 Cone Search 1&#39;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<p>You can also use custom VO database, say, <code class="docutils literal notranslate"><span class="pre">'my_vo_database.json'</span></code> from
<a class="reference internal" href="#vo-sec-client-db-manip-examples"><span class="std std-ref">VO database examples</span></a>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">conf</span><span class="o">.</span><span class="n">set_temp</span><span class="p">(</span><span class="s1">&#39;vos_baseurl&#39;</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">curdir</span><span class="p">):</span>  
<span class="gp">... </span>    <span class="k">try</span><span class="p">:</span>
<span class="gp">... </span>        <span class="n">result</span> <span class="o">=</span> <span class="n">vos_catalog</span><span class="o">.</span><span class="n">call_vo_service</span><span class="p">(</span>
<span class="gp">... </span>            <span class="s1">&#39;my_vo_database&#39;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;RA&#39;</span><span class="p">:</span> <span class="n">c</span><span class="o">.</span><span class="n">ra</span><span class="o">.</span><span class="n">degree</span><span class="p">,</span> <span class="s1">&#39;DEC&#39;</span><span class="p">:</span> <span class="n">c</span><span class="o">.</span><span class="n">dec</span><span class="o">.</span><span class="n">degree</span><span class="p">,</span>
<span class="gp">... </span>                    <span class="s1">&#39;SR&#39;</span><span class="p">:</span> <span class="n">sr</span><span class="o">.</span><span class="n">value</span><span class="p">})</span>
<span class="gp">... </span>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<span class="gp">... </span>        <span class="nb">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
<span class="go">Trying http://ex.org/cgi-bin/cs.pl?</span>
<span class="go">WARNING: W25: ... failed with: &lt;urlopen error timed out&gt; [...]</span>
<span class="go">None of the available catalogs returned valid results. (1 URL(s) timed out.)</span>
</pre></div>
</div>
</section>
</section>
<section id="simple-cone-search">
<span id="vo-sec-client-scs"></span><h2>Simple Cone Search<a class="headerlink" href="#simple-cone-search" title="Link to this heading">¶</a></h2>
<p><a class="reference internal" href="vo_conesearch.html#module-astroquery.vo_conesearch.conesearch" title="astroquery.vo_conesearch.conesearch"><code class="xref py py-obj docutils literal notranslate"><span class="pre">astroquery.vo_conesearch.conesearch</span></code></a> supports VO Simple Cone Search
capabilities.</p>
<p>Available databases are generated on the server-side hosted by STScI
using <a class="reference internal" href="validator.html#vo-sec-validator-validate"><span class="std std-ref">Validation for Simple Cone Search</span></a>. The database used is
controlled by <code class="docutils literal notranslate"><span class="pre">astroquery.vo_conesearch.conf.conesearch_dbname</span></code>, which can be
changed in <a class="reference internal" href="#vo-sec-scs-config"><span class="std std-ref">Configurable Items</span></a> below. Here are the available options:</p>
<ol class="arabic simple">
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">'conesearch_good'</span></code></dt><dd><p>Default. Passed validation without critical warnings and exceptions.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">'conesearch_warn'</span></code></dt><dd><p>Has critical warnings but no exceptions. Use at your own risk.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">'conesearch_exception'</span></code></dt><dd><p>Has some exceptions. <em>Never</em> use this.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">'conesearch_error'</span></code></dt><dd><p>Has network connection error. <em>Never</em> use this.</p>
</dd>
</dl>
</li>
</ol>
<p>In the default setting, it searches the good Cone Search services one by one,
stops at the first one that gives non-zero match(es), and returns the result.
Since the list of services are extracted from a Python dictionary, the search
order might differ from call to call.</p>
<p>There are also functions, both synchronously and asynchronously, available to
return <em>all</em> the Cone Search query results. However, this is not recommended
unless one knows what one is getting into, as it could potentially take up
significant run time and computing resources.</p>
<p><a class="reference internal" href="#vo-sec-scs-examples"><span class="std std-ref">Examples</span></a> below show how to use non-default search behaviors,
where the user has more control of which catalog(s) to search, et cetera.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Most services currently fail to parse when <code class="docutils literal notranslate"><span class="pre">pedantic=True</span></code>.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>When Cone Search returns warnings, you should decide
whether the results are reliable by inspecting the
warning codes in <a class="reference external" href="https://docs.astropy.org/en/latest/io/votable/api_exceptions.html#module-astropy.io.votable.exceptions" title="(in Astropy v6.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">astropy.io.votable.exceptions</span></code></a>.</p>
</div>
<section id="vo-sec-scs-config">
<span id="id3"></span><h3>Configurable Items<a class="headerlink" href="#vo-sec-scs-config" title="Link to this heading">¶</a></h3>
<p>These parameters are set via <a class="reference external" href="https://docs.astropy.org/en/latest/config/index.html#astropy-config" title="(in Astropy v6.1)"><span>Configuration System (astropy.config)</span></a>:</p>
<ul class="simple">
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">astroquery.vo_conesearch.conf.conesearch_dbname</span></code></dt><dd><p>Cone Search database name to query.</p>
</dd>
</dl>
</li>
</ul>
<p>Also depends on
<a class="reference internal" href="#vo-sec-vos-config"><span class="std std-ref">General VO Services Access Configurable Items</span></a>.</p>
</section>
<section id="vo-sec-scs-examples">
<span id="id4"></span><h3>Examples<a class="headerlink" href="#vo-sec-scs-examples" title="Link to this heading">¶</a></h3>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astroquery.vo_conesearch</span> <span class="kn">import</span> <span class="n">conesearch</span>
</pre></div>
</div>
<p>Shows a sorted list of Cone Search services to be searched:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">conesearch</span><span class="o">.</span><span class="n">list_catalogs</span><span class="p">()</span>  
<span class="go">[Guide Star Catalog 2.3 Cone Search 1&#39;,</span>
<span class="go"> &#39;SDSS DR7 - Sloan Digital Sky Survey Data Release 7 1&#39;,</span>
<span class="go"> &#39;SDSS DR7 - Sloan Digital Sky Survey Data Release 7 2&#39;, ...,</span>
<span class="go"> &#39;Two Micron All Sky Survey (2MASS) 2&#39;]</span>
</pre></div>
</div>
<p>To inspect them in detail, do the following and then refer to the examples in
<a class="reference internal" href="#vo-sec-client-db-manip"><span class="std std-ref">Database Manipulation</span></a>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astroquery.vo_conesearch</span> <span class="kn">import</span> <span class="n">vos_catalog</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">good_db</span> <span class="o">=</span> <span class="n">vos_catalog</span><span class="o">.</span><span class="n">get_remote_catalog_db</span><span class="p">(</span><span class="s1">&#39;conesearch_good&#39;</span><span class="p">)</span>  
</pre></div>
</div>
<p>Select a catalog to search:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">my_catname</span> <span class="o">=</span> <span class="s1">&#39;Guide Star Catalog 2.3 Cone Search 1&#39;</span>
</pre></div>
</div>
<p>By default, pedantic is <code class="docutils literal notranslate"><span class="pre">False</span></code>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astroquery.vo_conesearch</span> <span class="kn">import</span> <span class="n">conf</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conf</span><span class="o">.</span><span class="n">pedantic</span>
<span class="go">False</span>
</pre></div>
</div>
<p>Perform Cone Search in the selected catalog above for 0.01 degree radius
around 47 Tucanae with minimum verbosity, if supported.
The <code class="docutils literal notranslate"><span class="pre">catalog_db</span></code> keyword gives control over which catalog(s) to use.
If running this for the first time, a copy of the catalogs database will be
downloaded to local cache. To run this again without using cached data,
set <code class="docutils literal notranslate"><span class="pre">cache=False</span></code>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astropy</span> <span class="kn">import</span> <span class="n">coordinates</span> <span class="k">as</span> <span class="n">coord</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astropy</span> <span class="kn">import</span> <span class="n">units</span> <span class="k">as</span> <span class="n">u</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">coord</span><span class="o">.</span><span class="n">SkyCoord</span><span class="o">.</span><span class="n">from_name</span><span class="p">(</span><span class="s1">&#39;47 Tuc&#39;</span><span class="p">)</span>  
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span>  
<span class="go">&lt;SkyCoord (ICRS): (ra, dec) in deg</span>
<span class="go">    (6.0223292, -72.0814444)&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sr</span> <span class="o">=</span> <span class="mf">0.01</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">degree</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sr</span>
<span class="go">&lt;Quantity 0.01 deg&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">conesearch</span><span class="o">.</span><span class="n">conesearch</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">sr</span><span class="p">,</span> <span class="n">catalog_db</span><span class="o">=</span><span class="n">my_catname</span><span class="p">)</span>  
<span class="go">Trying http://gsss.stsci.edu/webservices/vo/ConeSearch.aspx?CAT=GSC23&amp;</span>
<span class="go">Downloading ...</span>
<span class="go">WARNING: W50: ...: Invalid unit string &#39;pixel&#39; [astropy.io.votable.tree]</span>
</pre></div>
</div>
<p>To run the command above using custom timeout of
60 seconds for each Cone Search service query:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">conf</span><span class="o">.</span><span class="n">set_temp</span><span class="p">(</span><span class="s1">&#39;timeout&#39;</span><span class="p">,</span> <span class="mi">60</span><span class="p">):</span>  
<span class="gp">... </span>    <span class="n">result</span> <span class="o">=</span> <span class="n">conesearch</span><span class="o">.</span><span class="n">conesearch</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">sr</span><span class="p">,</span> <span class="n">catalog_db</span><span class="o">=</span><span class="n">my_catname</span><span class="p">)</span>
</pre></div>
</div>
<p>To suppress <em>all</em> the screen outputs (not recommended):</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">warnings</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">warnings</span><span class="o">.</span><span class="n">catch_warnings</span><span class="p">():</span>  
<span class="gp">... </span>    <span class="n">warnings</span><span class="o">.</span><span class="n">simplefilter</span><span class="p">(</span><span class="s1">&#39;ignore&#39;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">result</span> <span class="o">=</span> <span class="n">conesearch</span><span class="o">.</span><span class="n">conesearch</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">sr</span><span class="p">,</span> <span class="n">catalog_db</span><span class="o">=</span><span class="n">my_catname</span><span class="p">,</span>
<span class="gp">... </span>                                   <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<p>If the query is successful, result is returned as <a class="reference external" href="https://docs.astropy.org/en/latest/api/astropy.table.Table.html#astropy.table.Table" title="(in Astropy v6.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">astropy.table.Table</span></code></a> and
can be manipulated further as such:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">result</span>  
<span class="go">&lt;Table length=70&gt;</span>
<span class="go">    objID           gsc2ID      gsc1ID ... multipleFlag compassGSC2id   Mag</span>
<span class="go">                                       ...                              mag</span>
<span class="go">    int64           object      object ...    int32         int64     float32</span>
<span class="go">-------------- ---------------- ------ ... ------------ ------------- -------</span>
<span class="go">23323176818483 00240514-7204542        ...            0 3392500290739   9.317</span>
<span class="go">23323176818639 00240573-7204494        ...            0 3392500290895  10.637</span>
<span class="go">23323176818627 00240399-7204512        ...            0 3392500290883  10.303</span>
<span class="go">23323176818661 00240462-7204462        ...            0 3392500290917   9.688</span>
<span class="go">23323176818631 00240697-7204506        ...            0 3392500290887  10.697</span>
<span class="go">23323176818667 00240628-7204452        ...            0 3392500290923   8.427</span>
<span class="go">           ...              ...    ... ...          ...           ...     ...</span>
<span class="go">23323176818820 00240446-7204201        ...            0 3392500291076  10.614</span>
<span class="go">20102011262474   S0102011262474        ...            0 3392500262474  22.314</span>
<span class="go">23323176818777 00241049-7204275        ...            0 3392500291033  13.057</span>
<span class="go">23323176818696 00235824-7204410        ...            0 3392500290952  10.203</span>
<span class="go">23323176818177 00240143-7205238        ...            0 3392500290433   9.067</span>
<span class="go">23323176818825 00240370-7204181        ...            0 3392500291081   9.984</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span><span class="o">.</span><span class="n">colnames</span>  
<span class="go">[&#39;objID&#39;,</span>
<span class="go"> &#39;gsc2ID&#39;,</span>
<span class="go"> &#39;gsc1ID&#39;,</span>
<span class="go"> &#39;hstID&#39;,</span>
<span class="go"> &#39;ra&#39;,</span>
<span class="go"> &#39;dec&#39;,</span>
<span class="go"> &#39;epoch&#39;,</span>
<span class="go"> ...,</span>
<span class="go"> &#39;Mag&#39;]</span>
</pre></div>
</div>
<p>For example, you can select only objects with 10 mag or brighter. Then, you
can calculate angular separation for those objects and sort them in
descending order by separation:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astropy.table</span> <span class="kn">import</span> <span class="n">Column</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bright_ones</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="n">result</span><span class="p">[</span><span class="s1">&#39;Mag&#39;</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="mi">10</span><span class="p">]</span>  
<span class="gp">&gt;&gt;&gt; </span><span class="n">bright_skycoord</span> <span class="o">=</span> <span class="n">coord</span><span class="o">.</span><span class="n">SkyCoord</span><span class="p">(</span><span class="n">bright_ones</span><span class="p">[</span><span class="s1">&#39;ra&#39;</span><span class="p">],</span> <span class="n">bright_ones</span><span class="p">[</span><span class="s1">&#39;dec&#39;</span><span class="p">])</span>  
<span class="gp">&gt;&gt;&gt; </span><span class="n">angular_sep</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;ang_sep&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">c</span><span class="o">.</span><span class="n">separation</span><span class="p">(</span><span class="n">bright_skycoord</span><span class="p">))</span>  
<span class="gp">&gt;&gt;&gt; </span><span class="n">bright_ones</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="n">angular_sep</span><span class="p">)</span>  
<span class="gp">&gt;&gt;&gt; </span><span class="n">bright_ones</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s1">&#39;ang_sep&#39;</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>  
<span class="gp">&gt;&gt;&gt; </span><span class="n">bright_ones</span>  
<span class="go">&lt;Table length=34&gt;</span>
<span class="go">    objID           gsc2ID      gsc1ID ...   Mag          ang_sep</span>
<span class="go">                                       ...   mag            deg</span>
<span class="go">    int64           object      object ... float32        float64</span>
<span class="go">-------------- ---------------- ------ ... ------- ----------------------</span>
<span class="go">23323176818825 00240370-7204181        ...   9.984   0.009972117338396163</span>
<span class="go">23323176818177 00240143-7205238        ...   9.067    0.00988160278196351</span>
<span class="go">23323176818497 00241238-7204519        ...   8.571   0.009016872507840567</span>
<span class="go">23323176818800 00240774-7204233        ...    9.58   0.008849138901697263</span>
<span class="go">23323176818403 00235917-7205064        ...   9.958   0.008732143392583538</span>
<span class="go">23323176818385 00241116-7205093        ...   8.234   0.008684087872339485</span>
<span class="go">           ...              ...    ... ...     ...                    ...</span>
<span class="go">23323176818688 00240544-7204421        ...   8.628  0.0030771767133611246</span>
<span class="go">23323176818478 00240305-7204554        ...   8.277  0.0030253920512680397</span>
<span class="go">23323176818630 00240317-7204507        ...   8.377   0.002884701330619627</span>
<span class="go">23323176818667 00240628-7204452        ...   8.427  0.0025032267406569163</span>
<span class="go">23323176818661 00240462-7204462        ...   9.688  0.0021564610200608928</span>
<span class="go">23323176818483 00240514-7204542        ...   9.317 0.00040921297020182925</span>
</pre></div>
</div>
<p>Perform the same Cone Search as above but asynchronously using
<a class="reference internal" href="../api/astroquery.vo_conesearch.conesearch.AsyncConeSearch.html#astroquery.vo_conesearch.conesearch.AsyncConeSearch" title="astroquery.vo_conesearch.conesearch.AsyncConeSearch"><code class="xref py py-obj docutils literal notranslate"><span class="pre">AsyncConeSearch</span></code></a>. Queries to
individual Cone Search services are still governed by
<code class="docutils literal notranslate"><span class="pre">astroquery.vo_conesearch.conf.timeout</span></code>. Cone Search is forced to run
in silent mode asynchronously, but warnings are still controlled by
<a class="reference external" href="https://docs.python.org/3/library/warnings.html#module-warnings" title="(in Python v3.12)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">warnings</span></code></a>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">async_search</span> <span class="o">=</span> <span class="n">conesearch</span><span class="o">.</span><span class="n">AsyncConeSearch</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">sr</span><span class="p">,</span> <span class="n">catalog_db</span><span class="o">=</span><span class="n">my_catname</span><span class="p">)</span>  
</pre></div>
</div>
<p>Check asynchronous search status:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">async_search</span><span class="o">.</span><span class="n">running</span><span class="p">()</span>  
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">async_search</span><span class="o">.</span><span class="n">done</span><span class="p">()</span>  
<span class="go">True</span>
</pre></div>
</div>
<p>Get search results after a 30-second wait (not to be confused with
<code class="docutils literal notranslate"><span class="pre">astroquery.vo_conesearch.conf.timeout</span></code> that governs individual Cone
Search queries). If search is still not done after 30 seconds,
<code class="docutils literal notranslate"><span class="pre">TimeoutError</span></code> is raised. Otherwise, Cone Search result is returned
and can be manipulated as above. If no <code class="docutils literal notranslate"><span class="pre">timeout</span></code> keyword given, it
waits until completion:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">async_result</span> <span class="o">=</span> <span class="n">async_search</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>  
<span class="gp">&gt;&gt;&gt; </span><span class="n">async_result</span>  
<span class="go">&lt;Table length=70&gt;</span>
<span class="go">    objID           gsc2ID      gsc1ID ... multipleFlag compassGSC2id   Mag</span>
<span class="go">                                       ...                              mag</span>
<span class="go">    int64           object      object ...    int32         int64     float32</span>
<span class="go">-------------- ---------------- ------ ... ------------ ------------- -------</span>
<span class="go">23323176818483 00240514-7204542        ...            0 3392500290739   9.317</span>
<span class="go">23323176818639 00240573-7204494        ...            0 3392500290895  10.637</span>
<span class="go">23323176818627 00240399-7204512        ...            0 3392500290883  10.303</span>
<span class="go">23323176818661 00240462-7204462        ...            0 3392500290917   9.688</span>
<span class="go">23323176818631 00240697-7204506        ...            0 3392500290887  10.697</span>
<span class="go">23323176818667 00240628-7204452        ...            0 3392500290923   8.427</span>
<span class="go">           ...              ...    ... ...          ...           ...     ...</span>
<span class="go">23323176818820 00240446-7204201        ...            0 3392500291076  10.614</span>
<span class="go">20102011262474   S0102011262474        ...            0 3392500262474  22.314</span>
<span class="go">23323176818777 00241049-7204275        ...            0 3392500291033  13.057</span>
<span class="go">23323176818696 00235824-7204410        ...            0 3392500290952  10.203</span>
<span class="go">23323176818177 00240143-7205238        ...            0 3392500290433   9.067</span>
<span class="go">23323176818825 00240370-7204181        ...            0 3392500291081   9.984</span>
</pre></div>
</div>
<p>Estimate the execution time and the number of objects for a Cone Search
service URL. Estimation only makes sense for a query that would
return a huge amount of matches. The prediction naively assumes a linear model,
which might not be accurate for some cases.
It also uses the normal Cone Search, not the asynchronous version.
This example uses a custom timeout of 30 seconds and runs silently
(except for warnings):</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">url_to_time</span> <span class="o">=</span> <span class="s1">&#39;https://vizier.cds.unistra.fr/viz-bin/conesearch/I/305/out?&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t_est</span><span class="p">,</span> <span class="n">n_est</span> <span class="o">=</span> <span class="n">conesearch</span><span class="o">.</span><span class="n">predict_search</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">url_to_time</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">deg</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">plot</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>  
<span class="gp">&gt;&gt;&gt; </span><span class="n">t_est</span>  <span class="c1"># Predicted execution time  </span>
<span class="go">12.193151943611374</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n_est</span>  <span class="c1"># Predicted number of objects  </span>
<span class="go">55322</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="../_images/client_predict_search_t.png"><img alt="Example plot from conesearch.predict_search() for t_est" src="../_images/client_predict_search_t.png" style="width: 450px;" /></a>
<a class="reference internal image-reference" href="../_images/client_predict_search_n.png"><img alt="Example plot from conesearch.predict_search() for n_est" src="../_images/client_predict_search_n.png" style="width: 450px;" /></a>
<p>For debugging purpose, one can obtain the actual execution time
and number of objects, and compare them with the predicted values
above. The INFO message shown in controlled by <a class="reference external" href="https://docs.astropy.org/en/latest/logging.html#module-astropy.logger" title="(in Astropy v6.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">astropy.logger</span></code></a>.
Keep in mind that running this for every prediction
would defeat the purpose of the prediction itself:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">t_real</span><span class="p">,</span> <span class="n">tab</span> <span class="o">=</span> <span class="n">conesearch</span><span class="o">.</span><span class="n">conesearch_timer</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">c</span><span class="p">,</span>  <span class="mf">0.5</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">deg</span><span class="p">,</span> <span class="n">catalog_db</span><span class="o">=</span><span class="n">url_to_time</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>  
<span class="go">INFO: conesearch_timer took 9.93050742149353 s on AVERAGE for 1 call(s). [...]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t_real</span>  <span class="c1"># Actual execution time  </span>
<span class="go">9.93050742149353</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">tab</span><span class="p">)</span>  <span class="c1"># Actual number of objects  </span>
<span class="go">50000</span>
</pre></div>
</div>
<p>One can also search in a list of catalogs instead of a single one.
In this example, we look for all catalogs containing <code class="docutils literal notranslate"><span class="pre">'guide*star'</span></code> in their
titles and only perform Cone Search using those services.
The first catalog in the list to successfully return non-zero result is used.
Therefore, the order of catalog names given in <code class="docutils literal notranslate"><span class="pre">catalog_db</span></code> is important:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">gsc_cats</span> <span class="o">=</span> <span class="n">conesearch</span><span class="o">.</span><span class="n">list_catalogs</span><span class="p">(</span><span class="n">pattern</span><span class="o">=</span><span class="s1">&#39;guide*star&#39;</span><span class="p">)</span>  
<span class="gp">&gt;&gt;&gt; </span><span class="n">gsc_cats</span>  
<span class="go">[&#39;Guide Star Catalog 2.3 Cone Search 1&#39;,</span>
<span class="go"> &#39;The HST Guide Star Catalog, Version 1.1 (Lasker+ 1992) 1&#39;,</span>
<span class="go"> &#39;The HST Guide Star Catalog, Version 1.2 (Lasker+ 1996) 1&#39;,</span>
<span class="go"> &#39;The HST Guide Star Catalog, Version GSC-ACT (Lasker+ 1996-99) 1&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gsc_result</span> <span class="o">=</span> <span class="n">conesearch</span><span class="o">.</span><span class="n">conesearch</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="mf">0.05</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">deg</span><span class="p">,</span> <span class="n">catalog_db</span><span class="o">=</span><span class="n">gsc_cats</span><span class="p">)</span>  
<span class="go">Trying http://gsss.stsci.edu/webservices/vo/ConeSearch.aspx?CAT=GSC23&amp;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">gsc_result</span><span class="p">)</span>  
<span class="go">1444</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gsc_result</span><span class="o">.</span><span class="n">url</span>  
<span class="go">&#39;http://gsss.stsci.edu/webservices/vo/ConeSearch.aspx?CAT=GSC23&#39;</span>
</pre></div>
</div>
<p>To repeat the Cone Search above with the services listed in a
different order:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">gsc_cats_reordered</span> <span class="o">=</span> <span class="p">[</span><span class="n">gsc_cats</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">)]</span>  
<span class="gp">&gt;&gt;&gt; </span><span class="n">gsc_cats_reordered</span>  
<span class="go">[&#39;The HST Guide Star Catalog, Version GSC-ACT (Lasker+ 1996-99) 1&#39;,</span>
<span class="go"> &#39;The HST Guide Star Catalog, Version 1.1 (Lasker+ 1992) 1&#39;,</span>
<span class="go"> &#39;The HST Guide Star Catalog, Version 1.2 (Lasker+ 1996) 1&#39;,</span>
<span class="go"> &#39;Guide Star Catalog 2.3 Cone Search 1&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gsc_result</span> <span class="o">=</span> <span class="n">conesearch</span><span class="o">.</span><span class="n">conesearch</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="mf">0.05</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">deg</span><span class="p">,</span> <span class="n">catalog_db</span><span class="o">=</span><span class="n">gsc_cats_reordered</span><span class="p">)</span>  
<span class="go">Trying https://vizier.cds.unistra.fr/viz-bin/conesearch/I/255/out?</span>
<span class="go">WARNING: NoResultsWarning: Catalog server ... returned 0 result [...]</span>
<span class="go">Trying https://vizier.cds.unistra.fr/viz-bin/conesearch/I/220/out?</span>
<span class="go">WARNING: NoResultsWarning: Catalog server ... returned 0 result [...]</span>
<span class="go">Trying https://vizier.cds.unistra.fr/viz-bin/conesearch/I/254/out?</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">gsc_result</span><span class="p">)</span>  
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gsc_result</span><span class="o">.</span><span class="n">url</span>  
<span class="go">&#39;https://vizier.cds.unistra.fr/viz-bin/conesearch/I/254/out?&#39;</span>
</pre></div>
</div>
<p>To obtain results from <em>all</em> the services above:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">all_gsc_results</span> <span class="o">=</span> <span class="n">conesearch</span><span class="o">.</span><span class="n">search_all</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="mf">0.05</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">deg</span><span class="p">,</span> <span class="n">catalog_db</span><span class="o">=</span><span class="n">gsc_cats</span><span class="p">)</span>  
<span class="go">Trying http://gsss.stsci.edu/webservices/vo/ConeSearch.aspx?CAT=GSC23&amp;</span>
<span class="go">Trying https://vizier.cds.unistra.fr/viz-bin/conesearch/I/220/out?</span>
<span class="go">WARNING: NoResultsWarning: Catalog server ... returned 0 result [...]</span>
<span class="go">Trying https://vizier.cds.unistra.fr/viz-bin/conesearch/I/254/out?</span>
<span class="go">Trying https://vizier.cds.unistra.fr/viz-bin/conesearch/I/255/out?</span>
<span class="go">WARNING: NoResultsWarning: Catalog server ... returned 0 result [...]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">all_gsc_results</span><span class="p">)</span>  
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">url</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">all_gsc_results</span><span class="p">):</span>  
<span class="gp">... </span>    <span class="n">tab</span> <span class="o">=</span> <span class="n">all_gsc_results</span><span class="p">[</span><span class="n">url</span><span class="p">]</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{}</span><span class="s1"> has </span><span class="si">{}</span><span class="s1"> results&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">tab</span><span class="p">)))</span>
<span class="go">http://gsss.stsci.edu/webservices/vo/ConeSearch.aspx?CAT=GSC23 has 1444 results</span>
<span class="go">https://vizier.cds.unistra.fr/viz-bin/conesearch/I/254/out? has 1 results</span>
</pre></div>
</div>
<p>To repeat the above asynchronously:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">async_search_all</span> <span class="o">=</span> <span class="n">conesearch</span><span class="o">.</span><span class="n">AsyncSearchAll</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">c</span><span class="p">,</span> <span class="mf">0.05</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">deg</span><span class="p">,</span> <span class="n">catalog_db</span><span class="o">=</span><span class="n">gsc_cats</span><span class="p">)</span>  
<span class="gp">&gt;&gt;&gt; </span><span class="n">async_search_all</span><span class="o">.</span><span class="n">running</span><span class="p">()</span>  
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">async_search_all</span><span class="o">.</span><span class="n">done</span><span class="p">()</span>  
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">all_gsc_results</span> <span class="o">=</span> <span class="n">async_search_all</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>  
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">url</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">all_gsc_results</span><span class="p">):</span>  
<span class="gp">... </span>    <span class="n">tab</span> <span class="o">=</span> <span class="n">all_gsc_results</span><span class="p">[</span><span class="n">url</span><span class="p">]</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{}</span><span class="s1"> has </span><span class="si">{}</span><span class="s1"> results&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">tab</span><span class="p">)))</span>
<span class="go">http://gsss.stsci.edu/webservices/vo/ConeSearch.aspx?CAT=GSC23 has 1444 results</span>
<span class="go">https://vizier.cds.unistra.fr/viz-bin/conesearch/I/254/out? has 1 results</span>
</pre></div>
</div>
<p>If one is unable to obtain any desired results using the default
Cone Search database, <code class="docutils literal notranslate"><span class="pre">'conesearch_good'</span></code>, that only contains
sites that cleanly passed validation, one can use <a class="reference external" href="https://docs.astropy.org/en/latest/config/index.html#astropy-config" title="(in Astropy v6.1)"><span>Configuration System (astropy.config)</span></a>
to use another database, <code class="docutils literal notranslate"><span class="pre">'conesearch_warn'</span></code>, containing sites with
validation warnings. One should use these sites with caution:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astroquery.vo_conesearch</span> <span class="kn">import</span> <span class="n">conf</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conf</span><span class="o">.</span><span class="n">conesearch_dbname</span> <span class="o">=</span> <span class="s1">&#39;conesearch_warn&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conesearch</span><span class="o">.</span><span class="n">list_catalogs</span><span class="p">()</span>  
<span class="go">Downloading http://astroconda.org/aux/vo_databases/conesearch_warn.json</span>
<span class="go">|==========================================|  20k/ 20k (100.00%)         0s</span>
<span class="go">[&#39;Gaia DR2 (Gaia Collaboration, 2018) 2&#39;,</span>
<span class="go"> &#39;The USNO-B1.0 Catalog (Monet+ 2003) 1&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">conesearch</span><span class="o">.</span><span class="n">conesearch</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">sr</span><span class="p">)</span>  
<span class="go">Trying https://vizier.cds.unistra.fr/viz-bin/conesearch/I/345/gaia2?</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>  
<span class="go">81</span>
</pre></div>
</div>
<p>You can also use custom Cone Search database, say, <code class="docutils literal notranslate"><span class="pre">'my_vo_database.json'</span></code>
from <a class="reference internal" href="#vo-sec-client-db-manip-examples"><span class="std std-ref">VO database examples</span></a>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astroquery.vo_conesearch</span> <span class="kn">import</span> <span class="n">conf</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conf</span><span class="o">.</span><span class="n">vos_baseurl</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">curdir</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conf</span><span class="o">.</span><span class="n">conesearch_dbname</span> <span class="o">=</span> <span class="s1">&#39;my_vo_database&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conesearch</span><span class="o">.</span><span class="n">list_catalogs</span><span class="p">()</span>
<span class="go">[&#39;My Catalog 1&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">conesearch</span><span class="o">.</span><span class="n">conesearch</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">sr</span><span class="p">)</span>  
<span class="go">Trying http://ex.org/cgi-bin/cs.pl?</span>
<span class="go">WARNING: NoResultsWarning: None of the available catalogs returned valid results. (1 URL(s) timed out.) [...]</span>
</pre></div>
</div>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><h3>Page Contents</h3>
<ul>
<li><a class="reference internal" href="#">Using “Client” API</a><ul>
<li><a class="reference internal" href="#catalog-manipulation">Catalog Manipulation</a><ul>
<li><a class="reference internal" href="#examples">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#database-manipulation">Database Manipulation</a><ul>
<li><a class="reference internal" href="#vo-sec-client-db-manip-examples">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#general-vo-services-access">General VO Services Access</a><ul>
<li><a class="reference internal" href="#configurable-items">Configurable Items</a></li>
<li><a class="reference internal" href="#id2">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#simple-cone-search">Simple Cone Search</a><ul>
<li><a class="reference internal" href="#vo-sec-scs-config">Configurable Items</a></li>
<li><a class="reference internal" href="#vo-sec-scs-examples">Examples</a></li>
</ul>
</li>
</ul>
</li>
</ul>


        </div>
      </div>
      <div class="clearer"></div>
    </div>
<footer class="footer">
  <p class="pull-right">
    <a href="../_sources/vo_conesearch/client.rst.txt"
       rel="nofollow">Page Source</a> &nbsp;
    <a href="#">Back to Top</a></p>
  <p>
    &copy; Copyright 2023, The Astroquery Developers.<br/>
    Created using <a href="http://www.sphinx-doc.org/en/stable/">Sphinx</a> 7.2.6. &nbsp;
    Last built 11 Dec 2023. <br/>
  </p>
</footer>
  </body>
</html>