<!DOCTYPE html>

<html lang="en" data-content_root="../../../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>astroquery.ipac.ned.core &#8212; astroquery v0.4.7.dev9024</title>
    <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/bootstrap-astropy.css?v=9d21690f" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/graphviz.css?v=eafc0fe6" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/plot_directive.css" />
    
    <script src="../../../../_static/jquery.js?v=5d32c60e"></script>
    <script src="../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
    <script src="../../../../_static/documentation_options.js?v=4195d067"></script>
    <script src="../../../../_static/doctools.js?v=888ff710"></script>
    <script src="../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script type="text/javascript" src="../../../../_static/sidebar.js"></script>
    <script type="text/javascript" src="../../../../_static/copybutton.js"></script>
    <link rel="icon" href="../../../../_static/astropy_logo.ico"/>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,600' rel='stylesheet' type='text/css'/>

  </head><body>
<div class="topbar">
  <a class="brand" title="Documentation Home" href="../../../../index.html"><span id="logotext1">astro</span><span id="logotext2">query</span><span id="logotext3">:docs</span></a>
  <ul>
    
    <li><a class="homelink" title="Astropy Homepage" href="http://www.astropy.org"></a></li>
    <li><a title="General Index" href="../../../../genindex.html">Index</a></li>
    <li><a title="Module Index" href="../../../../py-modindex.html">Modules</a></li>
    <li>
      
      
<form action="../../../../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
      
    </li>
  </ul>
</div>

<div class="related">
    <h3>Navigation</h3>
    <ul>
      <li>
	<a href="../../../../index.html">astroquery v0.4.7.dev9024</a>
	 &#187;
      </li>
      <li><a href="../../../index.html" >Module code</a> &#187;</li>
      <li><a href="../ned.html" accesskey="U">astroquery.ipac.ned</a> &#187;</li>
      
       
    </ul>
</div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for astroquery.ipac.ned.core</h1><div class="highlight"><pre>
<span></span><span class="c1"># Licensed under a 3-clause BSD style license - see LICENSE.rst</span>

<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">from</span> <span class="nn">io</span> <span class="kn">import</span> <span class="n">BytesIO</span>
<span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">namedtuple</span>
<span class="kn">from</span> <span class="nn">xml.dom.minidom</span> <span class="kn">import</span> <span class="n">parseString</span>

<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">timezone</span>

<span class="kn">import</span> <span class="nn">astropy.units</span> <span class="k">as</span> <span class="nn">u</span>
<span class="kn">import</span> <span class="nn">astropy.coordinates</span> <span class="k">as</span> <span class="nn">coord</span>
<span class="kn">import</span> <span class="nn">astropy.io.votable</span> <span class="k">as</span> <span class="nn">votable</span>

<span class="kn">from</span> <span class="nn">astroquery.query</span> <span class="kn">import</span> <span class="n">BaseQuery</span>
<span class="kn">from</span> <span class="nn">astroquery.utils</span> <span class="kn">import</span> <span class="n">commons</span>
<span class="kn">from</span> <span class="nn">astroquery.ipac.ned</span> <span class="kn">import</span> <span class="n">conf</span>
<span class="kn">from</span> <span class="nn">astroquery.exceptions</span> <span class="kn">import</span> <span class="n">TableParseError</span><span class="p">,</span> <span class="n">RemoteServiceError</span>

<span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Ned&quot;</span><span class="p">,</span> <span class="s2">&quot;NedClass&quot;</span><span class="p">]</span>


<div class="viewcode-block" id="NedClass">
<a class="viewcode-back" href="../../../../api/astroquery.ipac.ned.NedClass.html#astroquery.ipac.ned.NedClass">[docs]</a>
<span class="k">class</span> <span class="nc">NedClass</span><span class="p">(</span><span class="n">BaseQuery</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Class for querying the NED (NASA/IPAC Extragalactic Database) system</span>

<span class="sd">    https://ned.ipac.caltech.edu/</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># make configurable</span>
    <span class="n">BASE_URL</span> <span class="o">=</span> <span class="n">conf</span><span class="o">.</span><span class="n">server</span>
    <span class="n">OBJ_SEARCH_URL</span> <span class="o">=</span> <span class="n">BASE_URL</span> <span class="o">+</span> <span class="s1">&#39;objsearch&#39;</span>
    <span class="n">ALL_SKY_URL</span> <span class="o">=</span> <span class="n">BASE_URL</span> <span class="o">+</span> <span class="s1">&#39;allsky&#39;</span>
    <span class="n">DATA_SEARCH_URL</span> <span class="o">=</span> <span class="n">BASE_URL</span> <span class="o">+</span> <span class="s1">&#39;datasearch&#39;</span>
    <span class="n">IMG_DATA_URL</span> <span class="o">=</span> <span class="n">BASE_URL</span> <span class="o">+</span> <span class="s1">&#39;imgdata&#39;</span>
    <span class="n">SPECTRA_URL</span> <span class="o">=</span> <span class="n">BASE_URL</span> <span class="o">+</span> <span class="s1">&#39;NEDspectra&#39;</span>
    <span class="n">TIMEOUT</span> <span class="o">=</span> <span class="n">conf</span><span class="o">.</span><span class="n">timeout</span>
    <span class="n">Options</span> <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span><span class="s1">&#39;Options&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;display_name&#39;</span><span class="p">,</span> <span class="s1">&#39;cgi_name&#39;</span><span class="p">))</span>

    <span class="n">PHOTOMETRY_OUT</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="n">Options</span><span class="p">(</span><span class="s1">&#39;Data as Published and Homogenized (mJy)&#39;</span><span class="p">,</span>
                                 <span class="s1">&#39;bot&#39;</span><span class="p">),</span>
                      <span class="mi">2</span><span class="p">:</span> <span class="n">Options</span><span class="p">(</span><span class="s1">&#39;Data as Published&#39;</span><span class="p">,</span> <span class="s1">&#39;pub&#39;</span><span class="p">),</span>
                      <span class="mi">3</span><span class="p">:</span> <span class="n">Options</span><span class="p">(</span><span class="s1">&#39;Homogenized Units (mJy)&#39;</span><span class="p">,</span> <span class="s1">&#39;mjy&#39;</span><span class="p">)}</span>

<div class="viewcode-block" id="NedClass.query_object">
<a class="viewcode-back" href="../../../../api/astroquery.ipac.ned.NedClass.html#astroquery.ipac.ned.NedClass.query_object">[docs]</a>
    <span class="k">def</span> <span class="nf">query_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_name</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">get_query_payload</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                     <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Queries objects by name from the NED Service and returns the Main</span>
<span class="sd">        Source Table.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        object_name : str</span>
<span class="sd">            name of the identifier to query.</span>
<span class="sd">        get_query_payload : bool, optional</span>
<span class="sd">            if set to `True` then returns the dictionary sent as the HTTP</span>
<span class="sd">            request.  Defaults to `False`.</span>
<span class="sd">        verbose : bool, optional.</span>
<span class="sd">            When set to `True` displays warnings if the returned VOTable</span>
<span class="sd">            does not conform to the standard. Defaults to `False`.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        result : `astropy.table.Table`</span>
<span class="sd">            The result of the query as an `astropy.table.Table` object.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># for NED&#39;s object by name</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_object_async</span><span class="p">(</span><span class="n">object_name</span><span class="p">,</span>
                                           <span class="n">get_query_payload</span><span class="o">=</span><span class="n">get_query_payload</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">get_query_payload</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">response</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_result</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span></div>


<div class="viewcode-block" id="NedClass.query_object_async">
<a class="viewcode-back" href="../../../../api/astroquery.ipac.ned.NedClass.html#astroquery.ipac.ned.NedClass.query_object_async">[docs]</a>
    <span class="k">def</span> <span class="nf">query_object_async</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_name</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">get_query_payload</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Serves the same purpose as `~NedClass.query_object` but returns the</span>
<span class="sd">        raw HTTP response rather than the `astropy.table.Table` object.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        object_name : str</span>
<span class="sd">            name of the identifier to query.</span>
<span class="sd">        get_query_payload : bool, optional</span>
<span class="sd">            if set to `True` then returns the dictionary sent as the HTTP</span>
<span class="sd">            request.  Defaults to `False`</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        response : `requests.Response`</span>
<span class="sd">            The HTTP response returned from the service</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">request_payload</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request_payload_init</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_input_options</span><span class="p">(</span><span class="n">request_payload</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_output_options</span><span class="p">(</span><span class="n">request_payload</span><span class="p">)</span>
        <span class="n">request_payload</span><span class="p">[</span><span class="s1">&#39;objname&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">object_name</span>
        <span class="k">if</span> <span class="n">get_query_payload</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">request_payload</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="s2">&quot;GET&quot;</span><span class="p">,</span> <span class="n">url</span><span class="o">=</span><span class="n">Ned</span><span class="o">.</span><span class="n">OBJ_SEARCH_URL</span><span class="p">,</span>
                                 <span class="n">params</span><span class="o">=</span><span class="n">request_payload</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">Ned</span><span class="o">.</span><span class="n">TIMEOUT</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">response</span></div>


<div class="viewcode-block" id="NedClass.query_region">
<a class="viewcode-back" href="../../../../api/astroquery.ipac.ned.NedClass.html#astroquery.ipac.ned.NedClass.query_region">[docs]</a>
    <span class="k">def</span> <span class="nf">query_region</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">coordinates</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="mi">1</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">arcmin</span><span class="p">,</span> <span class="n">equinox</span><span class="o">=</span><span class="s1">&#39;J2000.0&#39;</span><span class="p">,</span>
                     <span class="n">get_query_payload</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Used to query a region around a known identifier or given</span>
<span class="sd">        coordinates. Equivalent to the near position and near name queries</span>
<span class="sd">        from the Ned web interface.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        coordinates : str or `astropy.coordinates` object</span>
<span class="sd">            The target around which to search. It may be specified as a</span>
<span class="sd">            string in which case it is resolved using online services or as</span>
<span class="sd">            the appropriate `astropy.coordinates` object. ICRS coordinates</span>
<span class="sd">            may also be entered as strings as specified in the</span>
<span class="sd">            `astropy.coordinates` module.</span>
<span class="sd">        radius : str or `~astropy.units.Quantity` object, optional</span>
<span class="sd">            The string must be parsable by `~astropy.coordinates.Angle`. The</span>
<span class="sd">            appropriate `~astropy.units.Quantity` object from</span>
<span class="sd">            `astropy.units` may also be used. Defaults to 1 arcmin.</span>
<span class="sd">        equinox : str, optional</span>
<span class="sd">            The equinox may be either J2000.0 or B1950.0. Defaults to J2000.0</span>
<span class="sd">        get_query_payload : bool, optional</span>
<span class="sd">            if set to `True` then returns the dictionary sent as the HTTP</span>
<span class="sd">            request.  Defaults to `False`.</span>
<span class="sd">        verbose : bool, optional.</span>
<span class="sd">            When set to `True` displays warnings if the returned VOTable</span>
<span class="sd">            does not conform to the standard. Defaults to `False`.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        result : `astropy.table.Table`</span>
<span class="sd">            The result of the query as an `astropy.table.Table` object.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># for NED&#39;s object near name/ near region</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_region_async</span><span class="p">(</span><span class="n">coordinates</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="n">radius</span><span class="p">,</span>
                                           <span class="n">equinox</span><span class="o">=</span><span class="n">equinox</span><span class="p">,</span>
                                           <span class="n">get_query_payload</span><span class="o">=</span><span class="n">get_query_payload</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">get_query_payload</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">response</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_result</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span></div>


<div class="viewcode-block" id="NedClass.query_region_async">
<a class="viewcode-back" href="../../../../api/astroquery.ipac.ned.NedClass.html#astroquery.ipac.ned.NedClass.query_region_async">[docs]</a>
    <span class="k">def</span> <span class="nf">query_region_async</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">coordinates</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="mi">1</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">arcmin</span><span class="p">,</span>
                           <span class="n">equinox</span><span class="o">=</span><span class="s1">&#39;J2000.0&#39;</span><span class="p">,</span> <span class="n">get_query_payload</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Serves the same purpose as `~NedClass.query_region` but returns the</span>
<span class="sd">        raw HTTP response rather than the `astropy.table.Table` object.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        coordinates : str or `astropy.coordinates` object</span>
<span class="sd">            The target around which to search. It may be specified as a</span>
<span class="sd">            string in which case it is resolved using online services or as</span>
<span class="sd">            the appropriate `astropy.coordinates` object. ICRS coordinates</span>
<span class="sd">            may also be entered as strings as specified in the</span>
<span class="sd">            `astropy.coordinates` module.</span>
<span class="sd">        radius : str or `~astropy.units.Quantity` object, optional</span>
<span class="sd">            The string must be parsable by `astropy.coordinates.Angle`. The</span>
<span class="sd">            appropriate `~astropy.units.Quantity` object from</span>
<span class="sd">            `astropy.units` may also be used. Defaults to 1 arcmin.</span>
<span class="sd">        equinox : str, optional</span>
<span class="sd">            The equinox may be either J2000.0 or B1950.0. Defaults to J2000.0</span>
<span class="sd">        get_query_payload : bool, optional</span>
<span class="sd">            if set to `True` then returns the dictionary sent as the HTTP</span>
<span class="sd">            request.  Defaults to `False`.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        response : `requests.Response`</span>
<span class="sd">            The HTTP response returned from the service</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">request_payload</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request_payload_init</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_input_options</span><span class="p">(</span><span class="n">request_payload</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_output_options</span><span class="p">(</span><span class="n">request_payload</span><span class="p">)</span>
        <span class="c1"># if its a name then query near name</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">commons</span><span class="o">.</span><span class="n">_is_coordinate</span><span class="p">(</span><span class="n">coordinates</span><span class="p">):</span>
            <span class="n">request_payload</span><span class="p">[</span><span class="s1">&#39;objname&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">coordinates</span>
            <span class="n">request_payload</span><span class="p">[</span><span class="s1">&#39;search_type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Near Name Search&#39;</span>
            <span class="n">request_payload</span><span class="p">[</span><span class="s1">&#39;radius&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">coord</span><span class="o">.</span><span class="n">Angle</span><span class="p">(</span><span class="n">radius</span><span class="p">)</span><span class="o">.</span><span class="n">arcmin</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">c</span> <span class="o">=</span> <span class="n">commons</span><span class="o">.</span><span class="n">parse_coordinates</span><span class="p">(</span><span class="n">coordinates</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;galactic&#39;</span><span class="p">:</span>
                    <span class="n">request_payload</span><span class="p">[</span><span class="s1">&#39;in_csys&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Galactic&#39;</span>
                    <span class="n">request_payload</span><span class="p">[</span><span class="s1">&#39;lon&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">l</span><span class="o">.</span><span class="n">degree</span>
                    <span class="n">request_payload</span><span class="p">[</span><span class="s1">&#39;lat&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">b</span><span class="o">.</span><span class="n">degree</span>
                <span class="c1"># for any other, convert to ICRS and send</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">request_payload</span><span class="p">[</span><span class="s1">&#39;in_csys&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Equatorial&#39;</span>
                    <span class="n">ra</span><span class="p">,</span> <span class="n">dec</span> <span class="o">=</span> <span class="n">commons</span><span class="o">.</span><span class="n">coord_to_radec</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
                    <span class="n">request_payload</span><span class="p">[</span><span class="s1">&#39;lon&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ra</span>
                    <span class="n">request_payload</span><span class="p">[</span><span class="s1">&#39;lat&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">dec</span>
                <span class="n">request_payload</span><span class="p">[</span><span class="s1">&#39;search_type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Near Position Search&#39;</span>
                <span class="n">request_payload</span><span class="p">[</span><span class="s1">&#39;in_equinox&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">equinox</span>
                <span class="n">request_payload</span><span class="p">[</span><span class="s1">&#39;radius&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">coord</span><span class="o">.</span><span class="n">Angle</span><span class="p">(</span><span class="n">radius</span><span class="p">)</span><span class="o">.</span><span class="n">arcmin</span>
            <span class="k">except</span> <span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">UnitsError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Coordinates not specified correctly&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">get_query_payload</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">request_payload</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="s2">&quot;GET&quot;</span><span class="p">,</span> <span class="n">url</span><span class="o">=</span><span class="n">Ned</span><span class="o">.</span><span class="n">OBJ_SEARCH_URL</span><span class="p">,</span>
                                 <span class="n">params</span><span class="o">=</span><span class="n">request_payload</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">Ned</span><span class="o">.</span><span class="n">TIMEOUT</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">response</span></div>


<div class="viewcode-block" id="NedClass.query_region_iau">
<a class="viewcode-back" href="../../../../api/astroquery.ipac.ned.NedClass.html#astroquery.ipac.ned.NedClass.query_region_iau">[docs]</a>
    <span class="k">def</span> <span class="nf">query_region_iau</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">iau_name</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">frame</span><span class="o">=</span><span class="s1">&#39;Equatorial&#39;</span><span class="p">,</span> <span class="n">equinox</span><span class="o">=</span><span class="s1">&#39;B1950.0&#39;</span><span class="p">,</span>
                         <span class="n">get_query_payload</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Used to query the Ned service via the IAU name. Equivalent to the</span>
<span class="sd">        IAU format queries of the Web interface.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        iau_name : str</span>
<span class="sd">            IAU coordinate-based name of target on which search is</span>
<span class="sd">            centered. Definition of IAU coordinates at</span>
<span class="sd">            https://cds.unistra.fr/Dic/iau-spec.html.</span>
<span class="sd">        frame : str, optional</span>
<span class="sd">            May be one of &#39;Equatorial&#39;, &#39;Ecliptic&#39;, &#39;Galactic&#39;,</span>
<span class="sd">            &#39;SuperGalactic&#39;.  Defaults to &#39;Equatorial&#39;.</span>
<span class="sd">        equinox : str, optional</span>
<span class="sd">            The equinox may be one of J2000.0 or B1950.0. Defaults to B1950.0</span>
<span class="sd">        get_query_payload : bool, optional</span>
<span class="sd">            if set to `True` then returns the dictionary sent as the HTTP</span>
<span class="sd">            request.  Defaults to `False`</span>

<span class="sd">        verbose : bool, optional.</span>
<span class="sd">            When set to `True` displays warnings if the returned VOTable</span>
<span class="sd">            does not conform to the standard. Defaults to `False`.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        result : `astropy.table.Table`</span>
<span class="sd">            The result of the query as an `astropy.table.Table` object.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_region_iau_async</span><span class="p">(</span>
            <span class="n">iau_name</span><span class="p">,</span> <span class="n">frame</span><span class="o">=</span><span class="s1">&#39;Equatorial&#39;</span><span class="p">,</span> <span class="n">equinox</span><span class="o">=</span><span class="s1">&#39;B1950.0&#39;</span><span class="p">,</span>
            <span class="n">get_query_payload</span><span class="o">=</span><span class="n">get_query_payload</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">get_query_payload</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">response</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_result</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span></div>


<div class="viewcode-block" id="NedClass.query_region_iau_async">
<a class="viewcode-back" href="../../../../api/astroquery.ipac.ned.NedClass.html#astroquery.ipac.ned.NedClass.query_region_iau_async">[docs]</a>
    <span class="k">def</span> <span class="nf">query_region_iau_async</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">iau_name</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">frame</span><span class="o">=</span><span class="s1">&#39;Equatorial&#39;</span><span class="p">,</span>
                               <span class="n">equinox</span><span class="o">=</span><span class="s1">&#39;B1950.0&#39;</span><span class="p">,</span> <span class="n">get_query_payload</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Serves the same purpose as `~NedClass.query_region_iau` but returns</span>
<span class="sd">        the raw HTTP response rather than the `astropy.table.Table` object.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        iau_name : str</span>
<span class="sd">            IAU coordinate-based name of target on which search is</span>
<span class="sd">            centered. Definition of IAU coordinates at</span>
<span class="sd">            https://cds.unistra.fr/Dic/iau-spec.html.</span>
<span class="sd">        frame : str, optional</span>
<span class="sd">            May be one of &#39;Equatorial&#39;, &#39;Ecliptic&#39;, &#39;Galactic&#39;,</span>
<span class="sd">            &#39;SuperGalactic&#39;.  Defaults to &#39;Equatorial&#39;.</span>
<span class="sd">        equinox : str, optional</span>
<span class="sd">            The equinox may be one of J2000.0 or B1950.0. Defaults to B1950.0</span>
<span class="sd">        get_query_payload : bool, optional</span>
<span class="sd">            if set to `True` then returns the dictionary sent as the HTTP</span>
<span class="sd">            request.  Defaults to `False`</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        response : `requests.Response`</span>
<span class="sd">            The HTTP response returned from the service.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">request_payload</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request_payload_init</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_input_options</span><span class="p">(</span><span class="n">request_payload</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_output_options</span><span class="p">(</span><span class="n">request_payload</span><span class="p">)</span>
        <span class="n">request_payload</span><span class="p">[</span><span class="s1">&#39;search_type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;IAU Search&#39;</span>
        <span class="n">request_payload</span><span class="p">[</span><span class="s1">&#39;iau_name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">iau_name</span>
        <span class="n">request_payload</span><span class="p">[</span><span class="s1">&#39;in_csys&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">frame</span>
        <span class="n">request_payload</span><span class="p">[</span><span class="s1">&#39;in_equinox&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">equinox</span>
        <span class="k">if</span> <span class="n">get_query_payload</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">request_payload</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="s2">&quot;GET&quot;</span><span class="p">,</span> <span class="n">url</span><span class="o">=</span><span class="n">Ned</span><span class="o">.</span><span class="n">OBJ_SEARCH_URL</span><span class="p">,</span>
                                 <span class="n">params</span><span class="o">=</span><span class="n">request_payload</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">Ned</span><span class="o">.</span><span class="n">TIMEOUT</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">response</span></div>


<div class="viewcode-block" id="NedClass.query_refcode">
<a class="viewcode-back" href="../../../../api/astroquery.ipac.ned.NedClass.html#astroquery.ipac.ned.NedClass.query_refcode">[docs]</a>
    <span class="k">def</span> <span class="nf">query_refcode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">refcode</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">get_query_payload</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Used to retrieve all objects contained in a particular</span>
<span class="sd">        reference. Equivalent to by refcode queries of the web interface.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        refcode : str</span>
<span class="sd">            19 digit reference code.  Example: 1997A&amp;A...323...31K.</span>
<span class="sd">        get_query_payload : bool, optional</span>
<span class="sd">            if set to `True` then returns the dictionary sent as the HTTP</span>
<span class="sd">            request.  Defaults to `False`.</span>
<span class="sd">        verbose : bool, optional.</span>
<span class="sd">            When set to `True` displays warnings if the returned VOTable</span>
<span class="sd">            does not conform to the standard. Defaults to `False`.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        result : `astropy.table.Table`</span>
<span class="sd">            The result of the query as an `astropy.table.Table` object.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_refcode_async</span><span class="p">(</span>
            <span class="n">refcode</span><span class="p">,</span> <span class="n">get_query_payload</span><span class="o">=</span><span class="n">get_query_payload</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">get_query_payload</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">response</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_result</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span></div>


<div class="viewcode-block" id="NedClass.query_refcode_async">
<a class="viewcode-back" href="../../../../api/astroquery.ipac.ned.NedClass.html#astroquery.ipac.ned.NedClass.query_refcode_async">[docs]</a>
    <span class="k">def</span> <span class="nf">query_refcode_async</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">refcode</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">get_query_payload</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Serves the same purpose as `~NedClass.query_region` but returns the</span>
<span class="sd">        raw HTTP response rather than the `astropy.table.Table` object.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        refcode : str</span>
<span class="sd">            19 digit reference code.  Example: 1997A&amp;A...323...31K.</span>
<span class="sd">        get_query_payload : bool, optional</span>
<span class="sd">            if set to `True` then returns the dictionary sent as the HTTP</span>
<span class="sd">            request.  Defaults to `False`.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        response : `requests.Response`</span>
<span class="sd">            The HTTP response returned from the service.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">request_payload</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request_payload_init</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_input_options</span><span class="p">(</span><span class="n">request_payload</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_output_options</span><span class="p">(</span><span class="n">request_payload</span><span class="p">)</span>
        <span class="n">request_payload</span><span class="p">[</span><span class="s1">&#39;search_type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Search&#39;</span>
        <span class="n">request_payload</span><span class="p">[</span><span class="s1">&#39;refcode&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">refcode</span>
        <span class="k">if</span> <span class="n">get_query_payload</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">request_payload</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="s2">&quot;GET&quot;</span><span class="p">,</span> <span class="n">url</span><span class="o">=</span><span class="n">Ned</span><span class="o">.</span><span class="n">OBJ_SEARCH_URL</span><span class="p">,</span>
                                 <span class="n">params</span><span class="o">=</span><span class="n">request_payload</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">Ned</span><span class="o">.</span><span class="n">TIMEOUT</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">response</span></div>


<div class="viewcode-block" id="NedClass.get_images">
<a class="viewcode-back" href="../../../../api/astroquery.ipac.ned.NedClass.html#astroquery.ipac.ned.NedClass.get_images">[docs]</a>
    <span class="k">def</span> <span class="nf">get_images</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_name</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">get_query_payload</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                   <span class="n">show_progress</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Query function to fetch FITS images for a given identifier.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        object_name : str</span>
<span class="sd">            name of the identifier to query.</span>
<span class="sd">        get_query_payload : bool, optional</span>
<span class="sd">            if set to `True` then returns the dictionary sent as the HTTP</span>
<span class="sd">            request.  Defaults to `False`</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        A list of `~astropy.io.fits.HDUList` objects</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">readable_objs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_images_async</span><span class="p">(</span>
            <span class="n">object_name</span><span class="p">,</span> <span class="n">get_query_payload</span><span class="o">=</span><span class="n">get_query_payload</span><span class="p">,</span>
            <span class="n">show_progress</span><span class="o">=</span><span class="n">show_progress</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">get_query_payload</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">readable_objs</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">get_fits</span><span class="p">()</span> <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">readable_objs</span><span class="p">]</span></div>


<div class="viewcode-block" id="NedClass.get_images_async">
<a class="viewcode-back" href="../../../../api/astroquery.ipac.ned.NedClass.html#astroquery.ipac.ned.NedClass.get_images_async">[docs]</a>
    <span class="k">def</span> <span class="nf">get_images_async</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_name</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">get_query_payload</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                         <span class="n">show_progress</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Serves the same purpose as `~NedClass.get_images` but returns</span>
<span class="sd">        file-handlers to the remote files rather than downloading them.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        object_name : str</span>
<span class="sd">            name of the identifier to query.</span>
<span class="sd">        get_query_payload : bool, optional</span>
<span class="sd">            if set to `True` then returns the dictionary sent as the HTTP</span>
<span class="sd">            request.  Defaults to `False`</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        A list of context-managers that yield readable file-like objects</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">image_urls</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_image_list</span><span class="p">(</span><span class="n">object_name</span><span class="p">,</span>
                                         <span class="n">get_query_payload</span><span class="o">=</span><span class="n">get_query_payload</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">get_query_payload</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">image_urls</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">commons</span><span class="o">.</span><span class="n">FileContainer</span><span class="p">(</span><span class="n">U</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;binary&#39;</span><span class="p">,</span>
                                      <span class="n">show_progress</span><span class="o">=</span><span class="n">show_progress</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">U</span> <span class="ow">in</span> <span class="n">image_urls</span><span class="p">]</span></div>


<div class="viewcode-block" id="NedClass.get_spectra">
<a class="viewcode-back" href="../../../../api/astroquery.ipac.ned.NedClass.html#astroquery.ipac.ned.NedClass.get_spectra">[docs]</a>
    <span class="k">def</span> <span class="nf">get_spectra</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_name</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">get_query_payload</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                    <span class="n">show_progress</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Query function to fetch FITS files of spectra for a given identifier.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        object_name : str</span>
<span class="sd">            name of the identifier to query.</span>
<span class="sd">        get_query_payload : bool, optional</span>
<span class="sd">            if set to `True` then returns the dictionary sent as the HTTP</span>
<span class="sd">            request.  Defaults to `False`</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        A list of `~astropy.io.fits.HDUList` objects</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">readable_objs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_spectra_async</span><span class="p">(</span>
            <span class="n">object_name</span><span class="p">,</span> <span class="n">get_query_payload</span><span class="o">=</span><span class="n">get_query_payload</span><span class="p">,</span>
            <span class="n">show_progress</span><span class="o">=</span><span class="n">show_progress</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">get_query_payload</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">readable_objs</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">get_fits</span><span class="p">()</span> <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">readable_objs</span><span class="p">]</span></div>


<div class="viewcode-block" id="NedClass.get_spectra_async">
<a class="viewcode-back" href="../../../../api/astroquery.ipac.ned.NedClass.html#astroquery.ipac.ned.NedClass.get_spectra_async">[docs]</a>
    <span class="k">def</span> <span class="nf">get_spectra_async</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_name</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">get_query_payload</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                          <span class="n">show_progress</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Serves the same purpose as `~NedClass.get_spectra` but returns</span>
<span class="sd">        file-handlers to the remote fits files rather than downloading them.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        object_name : str</span>
<span class="sd">            name of the identifier to query.</span>
<span class="sd">        get_query_payload : bool, optional</span>
<span class="sd">            if set to `True` then returns the dictionary sent as the HTTP</span>
<span class="sd">            request.  Defaults to `False`</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        A list of context-managers that yield readable file-like objects</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">image_urls</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_image_list</span><span class="p">(</span><span class="n">object_name</span><span class="p">,</span> <span class="n">item</span><span class="o">=</span><span class="s1">&#39;spectra&#39;</span><span class="p">,</span>
                                         <span class="n">get_query_payload</span><span class="o">=</span><span class="n">get_query_payload</span><span class="p">,</span>
                                         <span class="n">file_format</span><span class="o">=</span><span class="s1">&#39;fits&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">get_query_payload</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">image_urls</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">commons</span><span class="o">.</span><span class="n">FileContainer</span><span class="p">(</span><span class="n">U</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;binary&#39;</span><span class="p">,</span>
                                      <span class="n">show_progress</span><span class="o">=</span><span class="n">show_progress</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">U</span> <span class="ow">in</span> <span class="n">image_urls</span><span class="p">]</span></div>


<div class="viewcode-block" id="NedClass.get_image_list">
<a class="viewcode-back" href="../../../../api/astroquery.ipac.ned.NedClass.html#astroquery.ipac.ned.NedClass.get_image_list">[docs]</a>
    <span class="k">def</span> <span class="nf">get_image_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_name</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">item</span><span class="o">=</span><span class="s1">&#39;image&#39;</span><span class="p">,</span> <span class="n">file_format</span><span class="o">=</span><span class="s1">&#39;fits&#39;</span><span class="p">,</span>
                       <span class="n">get_query_payload</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Helper function that returns a list of urls from which to download</span>
<span class="sd">        the FITS images.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        object_name : str</span>
<span class="sd">            name of the identifier to query.</span>
<span class="sd">        get_query_payload : bool, optional</span>
<span class="sd">            if set to `True` then returns the dictionary sent as the HTTP</span>
<span class="sd">            request.  Defaults to `False`</span>
<span class="sd">        item : str, optional</span>
<span class="sd">            Can be either &#39;image&#39; or &#39;spectra&#39;. Defaults to &#39;image&#39;.</span>
<span class="sd">            Required to decide the right URL to query.</span>
<span class="sd">        file_format : str, optional</span>
<span class="sd">            Format of images/spectra to return. Defaults to &#39;fits&#39;.</span>
<span class="sd">            Other options available: &#39;author-ascii&#39;, &#39;NED-ascii&#39;, &#39;VO-table&#39;.</span>


<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        list of image urls</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">request_payload</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">objname</span><span class="o">=</span><span class="n">object_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">item</span> <span class="o">==</span> <span class="s1">&#39;spectra&#39;</span><span class="p">:</span>
            <span class="n">request_payload</span><span class="p">[</span><span class="s1">&#39;extend&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;multi&#39;</span>
            <span class="n">request_payload</span><span class="p">[</span><span class="s1">&#39;detail&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">request_payload</span><span class="p">[</span><span class="s1">&#39;numpp&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">50</span>
            <span class="n">request_payload</span><span class="p">[</span><span class="s1">&#39;preview&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="n">get_query_payload</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">request_payload</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">Ned</span><span class="o">.</span><span class="n">SPECTRA_URL</span> <span class="k">if</span> <span class="n">item</span> <span class="o">==</span> <span class="s1">&#39;spectra&#39;</span> <span class="k">else</span> <span class="n">Ned</span><span class="o">.</span><span class="n">IMG_DATA_URL</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="s2">&quot;GET&quot;</span><span class="p">,</span> <span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">request_payload</span><span class="p">,</span>
                                 <span class="n">timeout</span><span class="o">=</span><span class="n">Ned</span><span class="o">.</span><span class="n">TIMEOUT</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_extract_image_urls</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="n">file_format</span><span class="o">=</span><span class="n">file_format</span><span class="p">)</span></div>


    <span class="k">def</span> <span class="nf">_extract_image_urls</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">html_in</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">file_format</span><span class="o">=</span><span class="s1">&#39;fits&#39;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Helper function that uses regexps to extract the image urls from the</span>
<span class="sd">        given HTML.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        html_in : str</span>
<span class="sd">            source from which the urls are to be extracted</span>

<span class="sd">        format : str, optional</span>
<span class="sd">            Format of spectra to return. Defaults to &#39;fits&#39;.</span>
<span class="sd">            Other options available: &#39;author-ascii&#39;, &#39;NED-ascii&#39;, &#39;VO-table&#39;.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">base_url</span> <span class="o">=</span> <span class="s1">&#39;https://ned.ipac.caltech.edu&#39;</span>

        <span class="n">extensions</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;fits&#39;</span><span class="p">:</span> <span class="s1">&#39;fits.gz&#39;</span><span class="p">,</span>
                      <span class="s1">&#39;author-ascii&#39;</span><span class="p">:</span> <span class="s1">&#39;txt&#39;</span><span class="p">,</span>
                      <span class="s1">&#39;NED-ascii&#39;</span><span class="p">:</span> <span class="s1">&#39;_NED.txt&#39;</span><span class="p">,</span>
                      <span class="s1">&#39;VO-table&#39;</span><span class="p">:</span> <span class="s1">&#39;_votable.xml&#39;</span><span class="p">}</span>

        <span class="n">names</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;fits&#39;</span><span class="p">:</span> <span class="s1">&#39;FITS&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;author-ascii&#39;</span><span class="p">:</span> <span class="s1">&#39;Author-ASCII&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;NED-ascii&#39;</span><span class="p">:</span> <span class="s1">&#39;NED-ASCII&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;VO-table&#39;</span><span class="p">:</span> <span class="s1">&#39;VOTable&#39;</span><span class="p">}</span>

        <span class="n">pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span>
            <span class="sa">fr</span><span class="s1">&#39;&lt;a\s+href\s*?=&quot;?\s*?(.+?</span><span class="si">{</span><span class="n">extensions</span><span class="p">[</span><span class="n">file_format</span><span class="p">]</span><span class="si">}</span><span class="s1">)&quot;?\s*?&gt;\s*?(?:Retrieve|</span><span class="si">{</span><span class="n">names</span><span class="p">[</span><span class="n">file_format</span><span class="p">]</span><span class="si">}</span><span class="s1">)&lt;/a&gt;&#39;</span><span class="p">,</span>
            <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)</span>
        <span class="n">matched_urls</span> <span class="o">=</span> <span class="n">pattern</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">html_in</span><span class="p">)</span>
        <span class="n">url_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">base_url</span> <span class="o">+</span> <span class="n">img_url</span> <span class="k">for</span> <span class="n">img_url</span> <span class="ow">in</span> <span class="n">matched_urls</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">url_list</span>

<div class="viewcode-block" id="NedClass.get_table">
<a class="viewcode-back" href="../../../../api/astroquery.ipac.ned.NedClass.html#astroquery.ipac.ned.NedClass.get_table">[docs]</a>
    <span class="k">def</span> <span class="nf">get_table</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_name</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">table</span><span class="o">=</span><span class="s1">&#39;photometry&#39;</span><span class="p">,</span>
                  <span class="n">get_query_payload</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Fetches the specified data table for the object from NED and returns</span>
<span class="sd">        it as an `astropy.table.Table`.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        object_name : str</span>
<span class="sd">            name of the identifier to query.</span>
<span class="sd">        table : str, optional</span>
<span class="sd">            Must be one of</span>
<span class="sd">            [&#39;photometry&#39;|&#39;positions&#39;|&#39;diameters&#39;|&#39;redshifts&#39;|&#39;references&#39;|&#39;object_notes&#39;].</span>
<span class="sd">            Specifies the type of data-table that must be fetched for the</span>
<span class="sd">            given object. Defaults to &#39;photometry&#39;.</span>
<span class="sd">        output_table_format : int, [optional for photometry]</span>
<span class="sd">            specifies the format of the output table. Must be 1, 2 or 3.</span>
<span class="sd">            Defaults to 1. These options stand for:</span>
<span class="sd">            (1) Data as Published and Homogenized (mJy)</span>
<span class="sd">            (2) Data as Published</span>
<span class="sd">            (3) Homogenized Units (mJy)</span>
<span class="sd">        from_year : int, [optional for references]</span>
<span class="sd">            4 digit year from which to get the references. Defaults to 1800</span>
<span class="sd">        to_year : int, [optional for references]</span>
<span class="sd">            4 digit year upto which to fetch the references. Defaults to the</span>
<span class="sd">            current year.</span>
<span class="sd">        extended_search : bool, [optional for references]</span>
<span class="sd">            If set to `True`, returns all objects beginning with the same</span>
<span class="sd">            identifier name.  Defaults to `False`.</span>
<span class="sd">        get_query_payload : bool, optional</span>
<span class="sd">            if set to `True` then returns the dictionary sent as the HTTP</span>
<span class="sd">            request.  Defaults to `False`.</span>
<span class="sd">        verbose : bool, optional.</span>
<span class="sd">            When set to `True` displays warnings if the returned VOTable</span>
<span class="sd">            does not conform to the standard. Defaults to `False`.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        result : `astropy.table.Table`</span>
<span class="sd">            The result of the query as an `astropy.table.Table` object.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_table_async</span><span class="p">(</span><span class="n">object_name</span><span class="p">,</span> <span class="n">table</span><span class="o">=</span><span class="n">table</span><span class="p">,</span>
                                        <span class="n">get_query_payload</span><span class="o">=</span><span class="n">get_query_payload</span><span class="p">,</span>
                                        <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">get_query_payload</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">response</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_result</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span></div>


<div class="viewcode-block" id="NedClass.get_table_async">
<a class="viewcode-back" href="../../../../api/astroquery.ipac.ned.NedClass.html#astroquery.ipac.ned.NedClass.get_table_async">[docs]</a>
    <span class="k">def</span> <span class="nf">get_table_async</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_name</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">table</span><span class="o">=</span><span class="s1">&#39;photometry&#39;</span><span class="p">,</span>
                        <span class="n">get_query_payload</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Serves the same purpose as `~NedClass.query_region` but returns the</span>
<span class="sd">        raw HTTP response rather than the `astropy.table.Table` object.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        object_name : str</span>
<span class="sd">            name of the identifier to query.</span>
<span class="sd">        table : str, optional</span>
<span class="sd">            Must be one of</span>
<span class="sd">            [&#39;photometry&#39;|&#39;positions&#39;|&#39;diameters&#39;|&#39;redshifts&#39;|&#39;references&#39;|&#39;object_notes&#39;].</span>
<span class="sd">            Specifies the type of data-table that must be fetched for the</span>
<span class="sd">            given object. Defaults to &#39;photometry&#39;.</span>
<span class="sd">        from_year : int, [optional for references]</span>
<span class="sd">            4 digit year from which to get the references. Defaults to 1800</span>
<span class="sd">        to_year : int, [optional for references]</span>
<span class="sd">            4 digit year upto which to fetch the references. Defaults to the</span>
<span class="sd">            current year.</span>
<span class="sd">        extended_search : bool, [optional for references]</span>
<span class="sd">            If set to `True`, returns all objects beginning with the same</span>
<span class="sd">            identifier name.  Defaults to `False`.</span>
<span class="sd">        get_query_payload : bool, optional</span>
<span class="sd">            if set to `True` then returns the dictionary sent as the HTTP</span>
<span class="sd">            request.  Defaults to `False`.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        response : `requests.Response`</span>
<span class="sd">            The HTTP response returned from the service.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">SEARCH_TYPE</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">photometry</span><span class="o">=</span><span class="s1">&#39;Photometry&#39;</span><span class="p">,</span>
                           <span class="n">diameters</span><span class="o">=</span><span class="s1">&#39;Diameters&#39;</span><span class="p">,</span>
                           <span class="n">positions</span><span class="o">=</span><span class="s1">&#39;Positions&#39;</span><span class="p">,</span>
                           <span class="n">redshifts</span><span class="o">=</span><span class="s1">&#39;Redshifts&#39;</span><span class="p">,</span>
                           <span class="n">references</span><span class="o">=</span><span class="s1">&#39;Reference&#39;</span><span class="p">,</span>
                           <span class="n">object_notes</span><span class="o">=</span><span class="s1">&#39;Notes&#39;</span><span class="p">)</span>
        <span class="n">request_payload</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">of</span><span class="o">=</span><span class="s1">&#39;xml_main&#39;</span><span class="p">)</span>
        <span class="n">request_payload</span><span class="p">[</span><span class="s1">&#39;objname&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">object_name</span>
        <span class="n">request_payload</span><span class="p">[</span><span class="s1">&#39;search_type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">SEARCH_TYPE</span><span class="p">[</span><span class="n">table</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">table</span> <span class="o">==</span> <span class="s1">&#39;photometry&#39;</span><span class="p">:</span>
            <span class="n">output_table_format</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="n">request_payload</span><span class="p">[</span><span class="s1">&#39;meas_type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Ned</span><span class="o">.</span><span class="n">PHOTOMETRY_OUT</span><span class="p">[</span>
                <span class="n">output_table_format</span><span class="p">]</span><span class="o">.</span><span class="n">cgi_name</span>
        <span class="k">if</span> <span class="n">table</span> <span class="o">==</span> <span class="s1">&#39;references&#39;</span><span class="p">:</span>
            <span class="n">request_payload</span><span class="p">[</span><span class="s1">&#39;ref_extend&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
                <span class="s1">&#39;yes&#39;</span> <span class="k">if</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;extended_search&#39;</span><span class="p">)</span> <span class="k">else</span> <span class="s1">&#39;no&#39;</span><span class="p">)</span>
            <span class="n">request_payload</span><span class="p">[</span><span class="s1">&#39;begin_year&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;from_year&#39;</span><span class="p">,</span> <span class="mi">1800</span><span class="p">)</span>
            <span class="n">request_payload</span><span class="p">[</span><span class="s1">&#39;end_year&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;to_year&#39;</span><span class="p">,</span>
                                                     <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">)</span><span class="o">.</span><span class="n">year</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">get_query_payload</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">request_payload</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="s2">&quot;GET&quot;</span><span class="p">,</span> <span class="n">url</span><span class="o">=</span><span class="n">Ned</span><span class="o">.</span><span class="n">DATA_SEARCH_URL</span><span class="p">,</span>
                                 <span class="n">params</span><span class="o">=</span><span class="n">request_payload</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">Ned</span><span class="o">.</span><span class="n">TIMEOUT</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">response</span></div>


    <span class="k">def</span> <span class="nf">_request_payload_init</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes common cgi-parameters for all queries.</span>

<span class="sd">        For more information see &lt;https://ned.ipac.caltech.edu/Documents/Guides/Interface/QueryAuto&gt;</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        request_payload : dict</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">request_payload</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">of</span><span class="o">=</span><span class="s1">&#39;xml_main&#39;</span><span class="p">)</span>
        <span class="c1"># common settings for all queries as per NED guidelines</span>
        <span class="c1"># for more see &lt;https://ned.ipac.caltech.edu/Documents/Guides/Interface/QueryAuto&gt;</span>
        <span class="n">request_payload</span><span class="p">[</span><span class="s1">&#39;img_stamp&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;NO&#39;</span>
        <span class="n">request_payload</span><span class="p">[</span><span class="s1">&#39;extend&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;no&#39;</span>
        <span class="n">request_payload</span><span class="p">[</span><span class="s1">&#39;list_limit&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">return</span> <span class="n">request_payload</span>

    <span class="k">def</span> <span class="nf">_set_input_options</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request_payload</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Supports setting of input options for certain queries</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        request_payload : dict</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">request_payload</span><span class="p">[</span><span class="s1">&#39;hconst&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">conf</span><span class="o">.</span><span class="n">hubble_constant</span>
        <span class="n">request_payload</span><span class="p">[</span><span class="s1">&#39;omegam&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.27</span>
        <span class="n">request_payload</span><span class="p">[</span><span class="s1">&#39;omegav&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.73</span>
        <span class="n">request_payload</span><span class="p">[</span><span class="s1">&#39;corr_z&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">conf</span><span class="o">.</span><span class="n">correct_redshift</span>

    <span class="k">def</span> <span class="nf">_set_output_options</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request_payload</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Supports setting of output options for certain queries</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        request_payload : dict</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">request_payload</span><span class="p">[</span><span class="s1">&#39;out_csys&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">conf</span><span class="o">.</span><span class="n">output_coordinate_frame</span>
        <span class="n">request_payload</span><span class="p">[</span><span class="s1">&#39;out_equinox&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">conf</span><span class="o">.</span><span class="n">output_equinox</span>
        <span class="n">request_payload</span><span class="p">[</span><span class="s1">&#39;obj_sort&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">conf</span><span class="o">.</span><span class="n">sort_output_by</span>

    <span class="k">def</span> <span class="nf">_parse_result</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">response</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parses the raw HTTP response and returns it as an</span>
<span class="sd">        `astropy.table.Table`.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        response : `requests.Response`</span>
<span class="sd">            The HTTP response object</span>
<span class="sd">        verbose : bool, optional</span>
<span class="sd">            Defaults to false. When true it will display warnings whenever</span>
<span class="sd">            the VOtable returned from the service doesn&#39;t conform to the</span>
<span class="sd">            standard.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        table : `astropy.table.Table`</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">verbose</span><span class="p">:</span>
            <span class="n">commons</span><span class="o">.</span><span class="n">suppress_vo_warnings</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">tf</span> <span class="o">=</span> <span class="n">BytesIO</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
            <span class="n">first_table</span> <span class="o">=</span> <span class="n">votable</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">tf</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="s1">&#39;warn&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">get_first_table</span><span class="p">()</span>
            <span class="n">table</span> <span class="o">=</span> <span class="n">first_table</span><span class="o">.</span><span class="n">to_table</span><span class="p">(</span><span class="n">use_names_over_ids</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">table</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="p">(</span><span class="n">is_valid</span><span class="p">,</span> <span class="n">err_msg</span><span class="p">)</span> <span class="o">=</span> <span class="n">_check_ned_valid</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">is_valid</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">err_msg</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">RemoteServiceError</span><span class="p">(</span>
                        <span class="s2">&quot;The remote service returned the following error &quot;</span>
                        <span class="s2">&quot;message.</span><span class="se">\n</span><span class="s2">ERROR: </span><span class="si">{err_msg}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">err_msg</span><span class="o">=</span><span class="n">err_msg</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">RemoteServiceError</span><span class="p">(</span>
                        <span class="s2">&quot;The remote service returned an error, but with no &quot;</span>
                        <span class="s2">&quot;message.&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">response</span> <span class="o">=</span> <span class="n">response</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">table_parse_error</span> <span class="o">=</span> <span class="n">ex</span>
                <span class="k">raise</span> <span class="n">TableParseError</span><span class="p">(</span>
                    <span class="s2">&quot;Failed to parse NED result! The raw response can be &quot;</span>
                    <span class="s2">&quot;found in self.response, and the error in &quot;</span>
                    <span class="s2">&quot;self.table_parse_error.&quot;</span><span class="p">)</span></div>



<span class="n">Ned</span> <span class="o">=</span> <span class="n">NedClass</span><span class="p">()</span>


<span class="k">def</span> <span class="nf">_check_ned_valid</span><span class="p">(</span><span class="n">string</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Checks if the VOTable returned has an error parameter</span>

<span class="sd">    Parameters</span>
<span class="sd">    ---------</span>
<span class="sd">    string : The VOTable as a string</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    retval : bool</span>
<span class="sd">        `False` if error parameter found, `True` otherwise.</span>
<span class="sd">    errmsg : str</span>
<span class="sd">        The string containing the error message if it exists, `None` otherwise.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Routine assumes input is valid Table unless error parameter is found.</span>
    <span class="n">retval</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">errmsg</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">strdom</span> <span class="o">=</span> <span class="n">parseString</span><span class="p">(</span><span class="n">string</span><span class="p">)</span>
    <span class="n">p</span> <span class="o">=</span> <span class="n">strdom</span><span class="o">.</span><span class="n">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;PARAM&#39;</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">if</span> <span class="s1">&#39;name&#39;</span> <span class="ow">in</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">attributes</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">n</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">attributes</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
            <span class="n">errstr</span> <span class="o">=</span> <span class="n">n</span><span class="o">.</span><span class="n">value</span>

            <span class="k">if</span> <span class="n">errstr</span> <span class="o">==</span> <span class="s1">&#39;Error&#39;</span><span class="p">:</span>
                <span class="k">if</span> <span class="s1">&#39;value&#39;</span> <span class="ow">in</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">attributes</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                    <span class="n">m</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">attributes</span><span class="p">[</span><span class="s1">&#39;value&#39;</span><span class="p">]</span>
                    <span class="n">errmsg</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">value</span>
                <span class="n">retval</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">return</span> <span class="p">(</span><span class="n">retval</span><span class="p">,</span> <span class="n">errmsg</span><span class="p">)</span>
</pre></div>

            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><h3>Page Contents</h3>


        </div>
      </div>
      <div class="clearer"></div>
    </div>
<footer class="footer">
  <p class="pull-right"> &nbsp;
    <a href="#">Back to Top</a></p>
  <p>
    &copy; Copyright 2023, The Astroquery Developers.<br/>
    Created using <a href="http://www.sphinx-doc.org/en/stable/">Sphinx</a> 7.2.6. &nbsp;
    Last built 11 Dec 2023. <br/>
  </p>
</footer>
  </body>
</html>